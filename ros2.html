<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROS2 Implementation - JetBot ROS2</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¤–</text></svg>">
</head>
<body>
    <nav class="navbar">
        <div class="navbar-content">
            <a href="index.html" class="logo">
                <img src="https://raw.githubusercontent.com/hwkim3330/roii/refs/heads/main/keti.png" alt="KETI" class="logo-img">
                <div class="logo-text">
                    <span class="main">JetBot ROS2</span>
                    <span class="sub">Orin Nano Guide</span>
                </div>
            </a>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="hardware.html">Hardware</a></li>
                <li><a href="software.html">Software</a></li>
                <li><a href="ros2.html" class="active">ROS2</a></li>
                <li class="dropdown">
                    <a href="ros-advanced.html">ROS ì‹¬í™”</a>
                    <div class="dropdown-menu">
                        <a href="ros-advanced.html">í•µì‹¬ ê°œë…</a>
                        <a href="visualization.html">ì‹œê°í™” ë„êµ¬</a>
                        <a href="slam.html">SLAM</a>
                        <a href="navigation.html">Navigation</a>
                    </div>
                </li>
                <li><a href="rsaem-guide.html">RSAEM</a></li>
                <li><a href="web-tools.html">Web Tools</a></li>
                <li><a href="reference.html">Reference</a></li>
            </ul>
            <a href="https://github.com/hwkim3330/jetbot-docs" class="nav-github" target="_blank">
                <svg width="20" height="20" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
                </svg>
                GitHub
            </a>
        </div>
    </nav>

    <main class="main-content">
        <div class="doc-layout">
            <aside class="doc-sidebar">
                <h4>ì•„í‚¤í…ì²˜</h4>
                <ul>
                    <li><a href="#architecture" class="active">ROS 2 ì•„í‚¤í…ì²˜</a></li>
                    <li><a href="#package">íŒ¨í‚¤ì§€ êµ¬ì¡°</a></li>
                </ul>
                <h4>ëª¨í„° ì œì–´</h4>
                <ul>
                    <li><a href="#motor-driver">ëª¨í„° ë“œë¼ì´ë²„ ë…¸ë“œ</a></li>
                    <li><a href="#kinematics">ë””í¼ë Œì…œ í‚¤ë„¤ë§ˆí‹±ìŠ¤</a></li>
                    <li><a href="#teleop">í…”ë ˆì˜¤í¼ë ˆì´ì…˜</a></li>
                </ul>
                <h4>ì„¼ì„œ í†µí•©</h4>
                <ul>
                    <li><a href="#camera">ì¹´ë©”ë¼ ë…¸ë“œ</a></li>
                    <li><a href="#lidar">LiDAR ë…¸ë“œ</a></li>
                    <li><a href="#tf">TF íŠ¸ë¦¬ ì„¤ì •</a></li>
                </ul>
                <h4 id="navigation">ììœ¨ì£¼í–‰</h4>
                <ul>
                    <li><a href="#urdf">URDF ëª¨ë¸ë§</a></li>
                    <li><a href="#slam">SLAM Toolbox</a></li>
                    <li><a href="#nav2">Nav2 ìŠ¤íƒ</a></li>
                </ul>
            </aside>

            <article class="doc-content">
                <div class="breadcrumb">
                    <a href="index.html">Home</a> / <span>ROS2 Implementation</span>
                </div>

                <h1 id="architecture">ROS 2 ì•„í‚¤í…ì²˜ ì„¤ê³„</h1>
                <p>
                    JetBotì˜ ROS 2 ì†Œí”„íŠ¸ì›¨ì–´ ì•„í‚¤í…ì²˜ëŠ” í¬ê²Œ ì„¸ ê³„ì¸µìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤:
                    í•˜ë“œì›¨ì–´ ì œì–´(Low-Level), ì¸ì§€(Perception), í•­ë²•(Navigation).
                </p>

                <div class="diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ROS 2 ARCHITECTURE                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                 NAVIGATION LAYER                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚    Nav2     â”‚  â”‚    SLAM     â”‚  â”‚   Path Planner  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ Controller  â”‚  â”‚   Toolbox   â”‚  â”‚   (Regulated    â”‚  â”‚ â”‚
â”‚  â”‚  â”‚   (DWB)     â”‚  â”‚             â”‚  â”‚   Pure Pursuit) â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚            â”‚                â”‚                  â”‚              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                 PERCEPTION LAYER                         â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚   Camera    â”‚  â”‚   LiDAR     â”‚  â”‚   TF Broadcasterâ”‚  â”‚ â”‚
â”‚  â”‚  â”‚   Node      â”‚  â”‚   Node      â”‚  â”‚   (Transforms)  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ /image_raw  â”‚  â”‚   /scan     â”‚  â”‚                 â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚                  â”‚              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚               HARDWARE CONTROL LAYER                     â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚  â”‚  â”‚            Motor Driver Node                     â”‚    â”‚ â”‚
â”‚  â”‚  â”‚                                                  â”‚    â”‚ â”‚
â”‚  â”‚  â”‚    /cmd_vel (Twist) â”€â”€â–¶ PWM Signals â”€â”€â–¶ Motors  â”‚    â”‚ â”‚
â”‚  â”‚  â”‚                                                  â”‚    â”‚ â”‚
â”‚  â”‚  â”‚    Differential Drive Kinematics:                â”‚    â”‚ â”‚
â”‚  â”‚  â”‚    v_L = v - (Ï‰ Ã— L/2)                          â”‚    â”‚ â”‚
â”‚  â”‚  â”‚    v_R = v + (Ï‰ Ã— L/2)                          â”‚    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                   HARDWARE (I2C Bus 7)                    â”‚ â”‚
â”‚  â”‚     PCA9685 (PWM) â”€â”€â–¶ TB6612 (H-Bridge) â”€â”€â–¶ DC Motors    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                </div>

                <h2 id="package">íŒ¨í‚¤ì§€ êµ¬ì¡°</h2>
<pre><code>jetbot_ws/
â””â”€â”€ src/
    â””â”€â”€ jetbot_ros2/
        â”œâ”€â”€ jetbot_ros2/           # Python ëª¨ë“ˆ
        â”‚   â”œâ”€â”€ __init__.py
        â”‚   â”œâ”€â”€ motor_driver.py    # ëª¨í„° ë“œë¼ì´ë²„ ë…¸ë“œ
        â”‚   â”œâ”€â”€ camera_node.py     # ì¹´ë©”ë¼ ë…¸ë“œ
        â”‚   â””â”€â”€ lidar_node.py      # LiDAR ë˜í¼ ë…¸ë“œ
        â”œâ”€â”€ launch/
        â”‚   â”œâ”€â”€ jetbot_bringup.launch.py
        â”‚   â”œâ”€â”€ slam.launch.py
        â”‚   â””â”€â”€ navigation.launch.py
        â”œâ”€â”€ urdf/
        â”‚   â””â”€â”€ jetbot.urdf.xacro
        â”œâ”€â”€ config/
        â”‚   â”œâ”€â”€ nav2_params.yaml
        â”‚   â””â”€â”€ slam_params.yaml
        â”œâ”€â”€ package.xml
        â”œâ”€â”€ setup.py
        â””â”€â”€ setup.cfg</code></pre>

                <h3>íŒ¨í‚¤ì§€ ìƒì„±</h3>
<pre><code># ì›Œí¬ìŠ¤í˜ì´ìŠ¤ë¡œ ì´ë™
cd ~/jetbot_ws/src

# íŒ¨í‚¤ì§€ ìƒì„±
ros2 pkg create --build-type ament_python jetbot_ros2 \
    --dependencies rclpy geometry_msgs sensor_msgs std_msgs

# ë””ë ‰í† ë¦¬ êµ¬ì¡° ìƒì„±
cd jetbot_ros2
mkdir launch urdf config</code></pre>

                <h2 id="motor-driver">ëª¨í„° ë“œë¼ì´ë²„ ë…¸ë“œ</h2>
                <p>
                    <code>/cmd_vel</code> í† í”½ì„ êµ¬ë…í•˜ì—¬ Twist ë©”ì‹œì§€ë¥¼ PWM ì‹ í˜¸ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
                    í•µì‹¬ì€ <strong>I2C ë²„ìŠ¤ 7ë²ˆ</strong>ê³¼ <strong>ë””í¼ë Œì…œ ë“œë¼ì´ë¸Œ í‚¤ë„¤ë§ˆí‹±ìŠ¤</strong>ì…ë‹ˆë‹¤.
                </p>

                <h3 id="kinematics">ë””í¼ë Œì…œ ë“œë¼ì´ë¸Œ ìˆ˜ì‹</h3>
                <p>ë¡œë´‡ì˜ ì„ ì†ë„(v)ì™€ ê°ì†ë„(Ï‰), ë°”í€´ ê°„ ê±°ë¦¬(L)ê°€ ì£¼ì–´ì¡Œì„ ë•Œ:</p>
                <div class="diagram" style="text-align: left; padding: 1.5rem;">
v_left  = v - (Ï‰ Ã— L / 2)
v_right = v + (Ï‰ Ã— L / 2)

ì—¬ê¸°ì„œ:
  v = linear.x (ì „ì§„ ì†ë„, m/s)
  Ï‰ = angular.z (íšŒì „ ì†ë„, rad/s)
  L = wheelbase (ë°”í€´ ê°„ ê±°ë¦¬, m)
                </div>

                <h3>motor_driver.py êµ¬í˜„</h3>
<pre><code>#!/usr/bin/env python3
"""
JetBot Motor Driver Node for Jetson Orin Nano
ì£¼ì˜: I2C ë²„ìŠ¤ 7ë²ˆ ì‚¬ìš© (Orin Nano ì „ìš©)
"""
import rclpy
from rclpy.node import Node
from geometry_msgs.msg import Twist
from adafruit_servokit import ServoKit

class MotorDriverNode(Node):
    def __init__(self):
        super().__init__('motor_driver')

        # íŒŒë¼ë¯¸í„° ì„ ì–¸
        self.declare_parameter('wheelbase', 0.15)  # ë°”í€´ ê°„ ê±°ë¦¬ (m)
        self.declare_parameter('max_speed', 1.0)   # ìµœëŒ€ ì†ë„ (m/s)
        self.declare_parameter('i2c_bus', 7)       # Orin Nano: 7ë²ˆ
        self.declare_parameter('i2c_address', 0x40)

        # íŒŒë¼ë¯¸í„° ë¡œë“œ
        self.wheelbase = self.get_parameter('wheelbase').value
        self.max_speed = self.get_parameter('max_speed').value
        i2c_bus = self.get_parameter('i2c_bus').value
        i2c_address = self.get_parameter('i2c_address').value

        # PCA9685 ì´ˆê¸°í™” (Orin Nano: bus_id=7 í•„ìˆ˜!)
        try:
            self.kit = ServoKit(
                channels=16,
                address=i2c_address,
                i2c=None,  # adafruit_blinkaê°€ ìë™ ê°ì§€
                # Orin Nanoì—ì„œëŠ” busioë¥¼ í†µí•´ bus ì§€ì • í•„ìš”
            )
            self.get_logger().info(f'PCA9685 initialized on bus {i2c_bus}')
        except Exception as e:
            self.get_logger().error(f'Failed to initialize PCA9685: {e}')
            raise

        # PWM ì£¼íŒŒìˆ˜ ì„¤ì •
        self.kit.frequency = 60  # 60Hz for DC motors

        # Subscriber
        self.subscription = self.create_subscription(
            Twist,
            'cmd_vel',
            self.cmd_vel_callback,
            10
        )

        self.get_logger().info('Motor Driver Node started')

    def cmd_vel_callback(self, msg: Twist):
        """Twist ë©”ì‹œì§€ë¥¼ ëª¨í„° ì†ë„ë¡œ ë³€í™˜"""
        linear = msg.linear.x
        angular = msg.angular.z

        # ë””í¼ë Œì…œ ë“œë¼ì´ë¸Œ í‚¤ë„¤ë§ˆí‹±ìŠ¤
        left_speed = linear - (angular * self.wheelbase / 2)
        right_speed = linear + (angular * self.wheelbase / 2)

        # ì†ë„ ì •ê·œí™” (-1.0 ~ 1.0)
        left_speed = self.clamp(left_speed / self.max_speed, -1.0, 1.0)
        right_speed = self.clamp(right_speed / self.max_speed, -1.0, 1.0)

        # ëª¨í„° êµ¬ë™
        self.set_motor(0, left_speed)   # ì™¼ìª½ ëª¨í„°
        self.set_motor(1, right_speed)  # ì˜¤ë¥¸ìª½ ëª¨í„°

        self.get_logger().debug(f'L: {left_speed:.2f}, R: {right_speed:.2f}')

    def set_motor(self, motor_id: int, speed: float):
        """
        ëª¨í„° ì†ë„ ì„¤ì • (TB6612 ê¸°ì¤€)
        speed: -1.0 (í›„ì§„) ~ 0.0 (ì •ì§€) ~ 1.0 (ì „ì§„)
        """
        # ì±„ë„ ë§¤í•‘ (PCA9685)
        # Motor 0: PWM=CH0, IN1=CH1, IN2=CH2
        # Motor 1: PWM=CH3, IN1=CH4, IN2=CH5
        pwm_ch = motor_id * 3
        in1_ch = motor_id * 3 + 1
        in2_ch = motor_id * 3 + 2

        # ë°©í–¥ ì„¤ì •
        if speed > 0:
            self.kit.servo[in1_ch].angle = 180  # HIGH
            self.kit.servo[in2_ch].angle = 0    # LOW
        elif speed < 0:
            self.kit.servo[in1_ch].angle = 0    # LOW
            self.kit.servo[in2_ch].angle = 180  # HIGH
        else:
            self.kit.servo[in1_ch].angle = 0    # LOW
            self.kit.servo[in2_ch].angle = 0    # LOW

        # PWM ë“€í‹° ì‚¬ì´í´ (0-100%)
        duty = int(abs(speed) * 100)
        self.kit.servo[pwm_ch].angle = int(duty * 1.8)  # 0-180 ë§¤í•‘

    @staticmethod
    def clamp(value, min_val, max_val):
        return max(min_val, min(max_val, value))

    def destroy_node(self):
        """ë…¸ë“œ ì¢…ë£Œ ì‹œ ëª¨í„° ì •ì§€"""
        self.set_motor(0, 0)
        self.set_motor(1, 0)
        super().destroy_node()


def main(args=None):
    rclpy.init(args=args)
    node = MotorDriverNode()
    try:
        rclpy.spin(node)
    except KeyboardInterrupt:
        pass
    finally:
        node.destroy_node()
        rclpy.shutdown()


if __name__ == '__main__':
    main()</code></pre>

                <div class="alert alert-warning">
                    <strong>âš ï¸ ì¤‘ìš”:</strong> ìœ„ ì½”ë“œëŠ” ê°œë… ì„¤ëª…ìš©ì…ë‹ˆë‹¤. ì‹¤ì œ êµ¬í˜„ ì‹œ
                    <code>busio</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ I2C ë²„ìŠ¤ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </div>

                <h2 id="teleop">í…”ë ˆì˜¤í¼ë ˆì´ì…˜ í…ŒìŠ¤íŠ¸</h2>
<pre><code># í„°ë¯¸ë„ 1: ëª¨í„° ë“œë¼ì´ë²„ ë…¸ë“œ ì‹¤í–‰
ros2 run jetbot_ros2 motor_driver

# í„°ë¯¸ë„ 2: í‚¤ë³´ë“œ í…”ë ˆì˜¤í¼ë ˆì´ì…˜
ros2 run teleop_twist_keyboard teleop_twist_keyboard

# í‚¤ ì¡°ì‘:
#   i: ì „ì§„
#   ,: í›„ì§„
#   j: ì¢ŒíšŒì „
#   l: ìš°íšŒì „
#   k: ì •ì§€</code></pre>

                <h3>ìº˜ë¦¬ë¸Œë ˆì´ì…˜ ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>
                <ul>
                    <li><strong>ëª¨í„° ë°©í–¥:</strong> 'i' í‚¤ë¡œ ì „ì§„í•˜ëŠ”ì§€ í™•ì¸. ë°˜ëŒ€ë©´ ì½”ë“œì—ì„œ ë¶€í˜¸ ë°˜ì „</li>
                    <li><strong>íšŒì „ ë°©í–¥:</strong> 'j' í‚¤ë¡œ ì¢ŒíšŒì „í•˜ëŠ”ì§€ í™•ì¸</li>
                    <li><strong>ì§ì§„ì„±:</strong> ì „ì§„ ì‹œ í•œìª½ìœ¼ë¡œ ì ë¦¬ë©´ íŠ¸ë¦¼(trim) ë³´ì • ì ìš©</li>
                    <li><strong>ì˜¤ë„ë©”íŠ¸ë¦¬:</strong> 1m ì „ì§„ ì‹œ RVizì—ì„œë„ 1m ì´ë™ í™•ì¸</li>
                </ul>

                <h2 id="camera">ì¹´ë©”ë¼ ë…¸ë“œ</h2>
                <p>
                    Orin Nanoì˜ GPU ì„±ëŠ¥ì„ í™œìš©í•˜ë ¤ë©´ Isaac ROS Argus Cameraë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
                    Zero-Copyë¡œ ì´ë¯¸ì§€ë¥¼ GPU ë©”ëª¨ë¦¬ì—ì„œ ì§ì ‘ ì²˜ë¦¬í•©ë‹ˆë‹¤.
                </p>

                <h3>v4l2_camera ì‚¬ìš© (ê°„ë‹¨í•œ ë°©ë²•)</h3>
<pre><code># v4l2_camera íŒ¨í‚¤ì§€ ì„¤ì¹˜
sudo apt install ros-humble-v4l2-camera

# ì¹´ë©”ë¼ ë…¸ë“œ ì‹¤í–‰
ros2 run v4l2_camera v4l2_camera_node --ros-args \
    -p video_device:=/dev/video0 \
    -p image_size:=[640,480] \
    -p pixel_format:=YUYV</code></pre>

                <h3>Isaac ROS Argus Camera (GPU ê°€ì†)</h3>
<pre><code># Isaac ROS ì»¨í…Œì´ë„ˆ ë˜ëŠ” ë„¤ì´í‹°ë¸Œ ì„¤ì¹˜ í›„
ros2 launch isaac_ros_argus_camera isaac_ros_argus_camera_mono.launch.py</code></pre>

                <h2 id="lidar">LiDAR ë…¸ë“œ (RPLIDAR)</h2>
<pre><code># sllidar_ros2 íŒ¨í‚¤ì§€ ì„¤ì¹˜
cd ~/jetbot_ws/src
git clone https://github.com/Slamtec/sllidar_ros2.git

# ë¹Œë“œ
cd ~/jetbot_ws
colcon build --packages-select sllidar_ros2

# ì‹¤í–‰ (ì‹¬ë³¼ë¦­ ë§í¬ ì‚¬ìš©)
ros2 launch sllidar_ros2 sllidar_a1_launch.py \
    serial_port:=/dev/rplidar</code></pre>

                <h2 id="tf">TF íŠ¸ë¦¬ ì„¤ì •</h2>
                <p>ë¡œë´‡ì˜ ê° í”„ë ˆì„ ê°„ ë³€í™˜ ê´€ê³„ë¥¼ ì •ì˜í•©ë‹ˆë‹¤:</p>

                <div class="diagram">
                    map
                     â”‚
                     â–¼
                   odom
                     â”‚
                     â–¼
                 base_link â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚           â”‚             â”‚             â”‚
                     â–¼           â–¼             â–¼             â–¼
                 base_footprint  left_wheel   right_wheel  laser_frame
                                                              â”‚
                                                              â–¼
                                                          camera_link
                </div>

                <h3>Static Transform Publisher</h3>
<pre><code># LiDARê°€ ë¡œë´‡ ì¤‘ì‹¬ì—ì„œ 10cm ì•ì— ìœ„ì¹˜í•œ ê²½ìš°
ros2 run tf2_ros static_transform_publisher \
    0.1 0 0.05 0 0 0 base_link laser_frame</code></pre>

                <h2 id="urdf">URDF ëª¨ë¸ë§</h2>
                <p>ë¡œë´‡ì˜ ë¬¼ë¦¬ì  í˜•ìƒì„ ì •ì˜í•˜ëŠ” URDF íŒŒì¼ì…ë‹ˆë‹¤:</p>

<pre><code>&lt;?xml version="1.0"?&gt;
&lt;robot name="jetbot"&gt;

  &lt;!-- Base Link --&gt;
  &lt;link name="base_link"&gt;
    &lt;visual&gt;
      &lt;geometry&gt;
        &lt;box size="0.18 0.14 0.05"/&gt;
      &lt;/geometry&gt;
      &lt;material name="dark_grey"&gt;
        &lt;color rgba="0.2 0.2 0.2 1"/&gt;
      &lt;/material&gt;
    &lt;/visual&gt;
    &lt;collision&gt;
      &lt;geometry&gt;
        &lt;box size="0.18 0.14 0.05"/&gt;
      &lt;/geometry&gt;
    &lt;/collision&gt;
  &lt;/link&gt;

  &lt;!-- Left Wheel --&gt;
  &lt;link name="left_wheel"&gt;
    &lt;visual&gt;
      &lt;geometry&gt;
        &lt;cylinder radius="0.033" length="0.025"/&gt;
      &lt;/geometry&gt;
      &lt;material name="black"/&gt;
    &lt;/visual&gt;
  &lt;/link&gt;

  &lt;joint name="left_wheel_joint" type="continuous"&gt;
    &lt;parent link="base_link"/&gt;
    &lt;child link="left_wheel"/&gt;
    &lt;origin xyz="0 0.075 -0.01" rpy="-1.5708 0 0"/&gt;
    &lt;axis xyz="0 0 1"/&gt;
  &lt;/joint&gt;

  &lt;!-- Right Wheel --&gt;
  &lt;link name="right_wheel"&gt;
    &lt;visual&gt;
      &lt;geometry&gt;
        &lt;cylinder radius="0.033" length="0.025"/&gt;
      &lt;/geometry&gt;
      &lt;material name="black"/&gt;
    &lt;/visual&gt;
  &lt;/link&gt;

  &lt;joint name="right_wheel_joint" type="continuous"&gt;
    &lt;parent link="base_link"/&gt;
    &lt;child link="right_wheel"/&gt;
    &lt;origin xyz="0 -0.075 -0.01" rpy="-1.5708 0 0"/&gt;
    &lt;axis xyz="0 0 1"/&gt;
  &lt;/joint&gt;

  &lt;!-- LiDAR --&gt;
  &lt;link name="laser_frame"/&gt;

  &lt;joint name="laser_joint" type="fixed"&gt;
    &lt;parent link="base_link"/&gt;
    &lt;child link="laser_frame"/&gt;
    &lt;origin xyz="0.08 0 0.06" rpy="0 0 0"/&gt;
  &lt;/joint&gt;

&lt;/robot&gt;</code></pre>

                <h2 id="slam">SLAM Toolbox</h2>
<pre><code># SLAM Toolbox ì„¤ì¹˜
sudo apt install ros-humble-slam-toolbox

# SLAM ì‹¤í–‰
ros2 launch slam_toolbox online_async_launch.py \
    slam_params_file:=./config/slam_params.yaml</code></pre>

                <h3>slam_params.yaml</h3>
<pre><code>slam_toolbox:
  ros__parameters:
    odom_frame: odom
    map_frame: map
    base_frame: base_link
    scan_topic: /scan
    mode: mapping

    # ìŠ¤ìº” ë§¤ì¹­ íŒŒë¼ë¯¸í„°
    resolution: 0.05
    max_laser_range: 12.0
    minimum_travel_distance: 0.1
    minimum_travel_heading: 0.1</code></pre>

                <h2 id="nav2">Nav2 ììœ¨ì£¼í–‰ ìŠ¤íƒ</h2>
<pre><code># Nav2 ì„¤ì¹˜
sudo apt install ros-humble-navigation2 ros-humble-nav2-bringup

# Nav2 ì‹¤í–‰ (ë§µ í•„ìš”)
ros2 launch nav2_bringup navigation_launch.py \
    map:=./maps/my_map.yaml \
    params_file:=./config/nav2_params.yaml</code></pre>

                <div class="alert alert-info">
                    <strong>ğŸ’¡ JetBot ê¶Œì¥ ì»¨íŠ¸ë¡¤ëŸ¬:</strong>
                    <ul>
                        <li><strong>Regulated Pure Pursuit:</strong> ì €ì† ë¡œë´‡ì— ì í•©</li>
                        <li><strong>DWB (Dynamic Window Approach):</strong> ë™ì  ì¥ì• ë¬¼ íšŒí”¼</li>
                    </ul>
                </div>

                <h2>Launch íŒŒì¼ ì˜ˆì‹œ</h2>
<pre><code># launch/jetbot_bringup.launch.py
from launch import LaunchDescription
from launch_ros.actions import Node

def generate_launch_description():
    return LaunchDescription([
        # Motor Driver
        Node(
            package='jetbot_ros2',
            executable='motor_driver',
            name='motor_driver',
            parameters=[{
                'wheelbase': 0.15,
                'max_speed': 0.5,
                'i2c_bus': 7
            }]
        ),

        # LiDAR
        Node(
            package='sllidar_ros2',
            executable='sllidar_node',
            name='sllidar_node',
            parameters=[{
                'serial_port': '/dev/rplidar',
                'serial_baudrate': 115200,
                'frame_id': 'laser_frame'
            }]
        ),

        # Robot State Publisher
        Node(
            package='robot_state_publisher',
            executable='robot_state_publisher',
            name='robot_state_publisher',
            arguments=['urdf/jetbot.urdf']
        ),

        # Static TF
        Node(
            package='tf2_ros',
            executable='static_transform_publisher',
            arguments=['0', '0', '0', '0', '0', '0', 'base_link', 'base_footprint']
        ),
    ])</code></pre>

                <div class="alert alert-success">
                    <strong>âœ… êµ¬í˜„ ì™„ë£Œ!</strong> ì´ì œ JetBotì´ ROS 2 Humble í™˜ê²½ì—ì„œ ë™ì‘í•©ë‹ˆë‹¤.
                    ë‹¤ìŒ ë‹¨ê³„ë¡œ SLAMìœ¼ë¡œ ë§µì„ ìƒì„±í•˜ê³  Nav2ë¡œ ììœ¨ì£¼í–‰ì„ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”.
                </div>

                <div style="margin-top: 3rem; padding-top: 2rem; border-top: 1px solid var(--border-color);">
                    <p style="text-align: center;">
                        <a href="software.html" class="btn btn-secondary">â† ì´ì „: ì†Œí”„íŠ¸ì›¨ì–´ ì„¤ì¹˜</a>
                        <a href="ros-advanced.html" class="btn btn-primary" style="margin-left: 1rem;">ë‹¤ìŒ: ROS ì‹¬í™” â†’</a>
                    </p>
                </div>
            </article>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-logo">
            <img src="https://raw.githubusercontent.com/hwkim3330/roii/refs/heads/main/keti.png" alt="KETI">
        </div>
        <p>
            JetBot ROS2 Documentation &copy; 2024 KETI |
            <a href="https://github.com/hwkim3330/jetbot-docs" target="_blank">GitHub</a>
        </p>
    </footer>
</body>
</html>
