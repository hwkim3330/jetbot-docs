<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROS ì‹¬í™”ê³¼ì • - JetBot ROS2</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¤–</text></svg>">
</head>
<body>
    <nav class="navbar">
        <div class="navbar-content">
            <a href="index.html" class="logo">
                <img src="https://raw.githubusercontent.com/hwkim3330/roii/refs/heads/main/keti.png" alt="KETI" class="logo-img">
                <div class="logo-text">
                    <span class="main">JetBot ROS2</span>
                    <span class="sub">Orin Nano Guide</span>
                </div>
            </a>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="hardware.html">Hardware</a></li>
                <li><a href="software.html">Software</a></li>
                <li><a href="ros2.html">ROS2</a></li>
                <li><a href="ros-advanced.html" class="active">ROS ì‹¬í™”</a></li>
                <li><a href="web-tools.html">Web Tools</a></li>
                <li><a href="reference.html">Reference</a></li>
            </ul>
            <a href="https://github.com/hwkim3330/jetbot-docs" class="nav-github" target="_blank">
                <svg width="20" height="20" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
                </svg>
                GitHub
            </a>
        </div>
    </nav>

    <main class="main-content">
        <div class="doc-layout">
            <aside class="doc-sidebar">
                <h4>ROS 2 í•µì‹¬ ê°œë…</h4>
                <ul>
                    <li><a href="#ros2-architecture">ì•„í‚¤í…ì²˜ ê°œìš”</a></li>
                    <li><a href="#dds">DDS ë¯¸ë“¤ì›¨ì–´</a></li>
                    <li><a href="#qos">QoS í”„ë¡œíŒŒì¼</a></li>
                </ul>
                <h4>í†µì‹  ë©”ì»¤ë‹ˆì¦˜</h4>
                <ul>
                    <li><a href="#topics">í† í”½ (Topics)</a></li>
                    <li><a href="#services">ì„œë¹„ìŠ¤ (Services)</a></li>
                    <li><a href="#actions">ì•¡ì…˜ (Actions)</a></li>
                    <li><a href="#parameters">íŒŒë¼ë¯¸í„°</a></li>
                </ul>
                <h4>ê³ ê¸‰ ê¸°ëŠ¥</h4>
                <ul>
                    <li><a href="#lifecycle">Lifecycle ë…¸ë“œ</a></li>
                    <li><a href="#composition">ë…¸ë“œ ì»´í¬ì§€ì…˜</a></li>
                    <li><a href="#executors">Executors</a></li>
                    <li><a href="#callbacks">ì½œë°± ê·¸ë£¹</a></li>
                </ul>
                <h4>ì‹¤ì‹œê°„ ì²˜ë¦¬</h4>
                <ul>
                    <li><a href="#realtime">ì‹¤ì‹œê°„ ROS 2</a></li>
                    <li><a href="#intra-process">Intra-Process</a></li>
                </ul>
                <h4>ì‹¬í™” ë¬¸ì„œ</h4>
                <ul>
                    <li><a href="visualization.html">ì‹œê°í™” ë„êµ¬</a></li>
                    <li><a href="slam.html">SLAM</a></li>
                    <li><a href="navigation.html">Navigation</a></li>
                </ul>
                <h4>ê°œë°œ ë„êµ¬</h4>
                <ul>
                    <li><a href="#colcon">Colcon ë¹Œë“œ</a></li>
                    <li><a href="#launch">Launch ì‹œìŠ¤í…œ</a></li>
                    <li><a href="#debugging">ë””ë²„ê¹… ê¸°ë²•</a></li>
                </ul>
            </aside>

            <article class="doc-content">
                <div class="breadcrumb">
                    <a href="index.html">Home</a> / <span>ROS ì‹¬í™”ê³¼ì •</span>
                </div>

                <h1 id="ros2-architecture">ROS 2 ì•„í‚¤í…ì²˜ ì‹¬ì¸µ ë¶„ì„</h1>
                <p>
                    ROS 2ëŠ” ROS 1ì˜ í•œê³„ë¥¼ ê·¹ë³µí•˜ê¸° ìœ„í•´ ì™„ì „íˆ ìƒˆë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.
                    ì‚°ì—…ìš© í‘œì¤€ì¸ <strong>DDS (Data Distribution Service)</strong>ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ì—¬
                    ì‹¤ì‹œê°„ì„±, ë³´ì•ˆ, ë©€í‹° ë¡œë´‡ ì§€ì›ì„ ì œê³µí•©ë‹ˆë‹¤.
                </p>

                <div class="diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ROS 2 ARCHITECTURE                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                     APPLICATION LAYER                            â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚   â”‚   â”‚  Nodes   â”‚  â”‚  Topics  â”‚  â”‚ Services â”‚  â”‚   Actions    â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                   â”‚                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                       RCL (ROS Client Library)                   â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚   â”‚   â”‚  rclpy  â”‚  â”‚  rclcpp â”‚  â”‚  rclrs  â”‚  â”‚  rcljava, etc.  â”‚   â”‚   â”‚
â”‚   â”‚   â”‚ Python  â”‚  â”‚   C++   â”‚  â”‚  Rust   â”‚  â”‚  Other langs    â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                   â”‚                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                          RMW (ROS Middleware)                    â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚   â”‚   â”‚ rmw_fastrtps â”‚  â”‚ rmw_cyclone  â”‚  â”‚  rmw_connextdds  â”‚     â”‚   â”‚
â”‚   â”‚   â”‚  (default)   â”‚  â”‚    dds       â”‚  â”‚    (RTI)         â”‚     â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                   â”‚                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                    DDS (Data Distribution Service)               â”‚   â”‚
â”‚   â”‚           OMG Standard | RTPS Protocol | UDP/TCP Transport       â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                </div>

                <h3>ROS 1 vs ROS 2 ë¹„êµ</h3>
                <table class="specs-table">
                    <thead>
                        <tr>
                            <th>í•­ëª©</th>
                            <th>ROS 1</th>
                            <th>ROS 2</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>ë¯¸ë“¤ì›¨ì–´</td>
                            <td>ì»¤ìŠ¤í…€ (TCPROS/UDPROS)</td>
                            <td>DDS (ì‚°ì—… í‘œì¤€)</td>
                        </tr>
                        <tr>
                            <td>ë§ˆìŠ¤í„° ë…¸ë“œ</td>
                            <td>í•„ìˆ˜ (roscore)</td>
                            <td>ë¶ˆí•„ìš” (ë¶„ì‚° íƒìƒ‰)</td>
                        </tr>
                        <tr>
                            <td>ì‹¤ì‹œê°„ ì§€ì›</td>
                            <td>ì œí•œì </td>
                            <td>ë„¤ì´í‹°ë¸Œ ì§€ì›</td>
                        </tr>
                        <tr>
                            <td>ë³´ì•ˆ</td>
                            <td>ì—†ìŒ</td>
                            <td>DDS-Security</td>
                        </tr>
                        <tr>
                            <td>ë©€í‹° ë¡œë´‡</td>
                            <td>ë³µì¡</td>
                            <td>Domain IDë¡œ ê°„ë‹¨</td>
                        </tr>
                        <tr>
                            <td>í”Œë«í¼</td>
                            <td>Linux ì¤‘ì‹¬</td>
                            <td>Windows, macOS, RTOS</td>
                        </tr>
                        <tr>
                            <td>ë¹Œë“œ ì‹œìŠ¤í…œ</td>
                            <td>catkin</td>
                            <td>colcon + ament</td>
                        </tr>
                    </tbody>
                </table>

                <h2 id="dds">DDS ë¯¸ë“¤ì›¨ì–´ ì´í•´</h2>
                <p>
                    DDS(Data Distribution Service)ëŠ” OMG(Object Management Group)ì—ì„œ ì •ì˜í•œ
                    ë°ì´í„° ì¤‘ì‹¬ í¼ë¸”ë¦¬ì‹œ-ì„œë¸ŒìŠ¤í¬ë¼ì´ë¸Œ í‘œì¤€ì…ë‹ˆë‹¤.
                </p>

                <h3>DDS í•µì‹¬ ê°œë…</h3>
                <div class="diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     DDS DOMAIN (Domain ID: 0)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚   DomainParticipant â”‚          â”‚   DomainParticipant â”‚        â”‚
â”‚   â”‚     (Node A)        â”‚          â”‚     (Node B)        â”‚        â”‚
â”‚   â”‚                     â”‚          â”‚                     â”‚        â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   RTPS   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚        â”‚
â”‚   â”‚  â”‚  DataWriter  â”‚â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â–¶â”‚  DataReader  â”‚  â”‚        â”‚
â”‚   â”‚  â”‚  (Publisher) â”‚  â”‚  UDP/TCP â”‚  â”‚ (Subscriber) â”‚  â”‚        â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚        â”‚
â”‚   â”‚                     â”‚          â”‚                     â”‚        â”‚
â”‚   â”‚  Topic: /cmd_vel   â”‚          â”‚  Topic: /cmd_vel   â”‚        â”‚
â”‚   â”‚  Type: Twist       â”‚          â”‚  Type: Twist       â”‚        â”‚
â”‚   â”‚  QoS: Reliable     â”‚          â”‚  QoS: Reliable     â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                </div>

                <h3>RMW êµ¬í˜„ì²´ ì„ íƒ</h3>
<pre><code># í˜„ì¬ RMW í™•ì¸
echo $RMW_IMPLEMENTATION

# Fast DDS (ê¸°ë³¸ê°’)
export RMW_IMPLEMENTATION=rmw_fastrtps_cpp

# Cyclone DDS (ê²½ëŸ‰, ì„ë² ë””ë“œ ì í•©)
sudo apt install ros-humble-rmw-cyclonedds-cpp
export RMW_IMPLEMENTATION=rmw_cyclonedds_cpp

# ì˜êµ¬ ì„¤ì •
echo "export RMW_IMPLEMENTATION=rmw_cyclonedds_cpp" >> ~/.bashrc</code></pre>

                <div class="alert alert-info">
                    <strong>JetBot ê¶Œì¥:</strong> Cyclone DDSëŠ” ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ì ì–´
                    Jetsonê³¼ ê°™ì€ ì„ë² ë””ë“œ ì‹œìŠ¤í…œì— ì í•©í•©ë‹ˆë‹¤.
                </div>

                <h3>ë©€í‹° ë¡œë´‡ í™˜ê²½: Domain ID</h3>
<pre><code># ë¡œë´‡ 1 (Domain 0)
export ROS_DOMAIN_ID=0
ros2 run jetbot_ros2 motor_driver

# ë¡œë´‡ 2 (Domain 1) - ì™„ì „íˆ ë¶„ë¦¬ëœ ë„¤íŠ¸ì›Œí¬
export ROS_DOMAIN_ID=1
ros2 run jetbot_ros2 motor_driver

# ê°™ì€ Domainì˜ ëª¨ë“  ë…¸ë“œ í™•ì¸
ros2 node list</code></pre>

                <h2 id="qos">QoS (Quality of Service) í”„ë¡œíŒŒì¼</h2>
                <p>
                    QoSëŠ” í†µì‹ ì˜ ì‹ ë¢°ì„±, ì§€ì—°ì‹œê°„, ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ì„ ì œì–´í•©ë‹ˆë‹¤.
                    ì„¼ì„œ ë°ì´í„°ì™€ ì œì–´ ëª…ë ¹ì— ì„œë¡œ ë‹¤ë¥¸ QoSë¥¼ ì ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
                </p>

                <h3>QoS ì •ì±… ì¢…ë¥˜</h3>
                <table class="specs-table">
                    <thead>
                        <tr>
                            <th>ì •ì±…</th>
                            <th>ì˜µì…˜</th>
                            <th>ì„¤ëª…</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Reliability</strong></td>
                            <td>RELIABLE / BEST_EFFORT</td>
                            <td>ë©”ì‹œì§€ ì „ë‹¬ ë³´ì¥ ì—¬ë¶€</td>
                        </tr>
                        <tr>
                            <td><strong>Durability</strong></td>
                            <td>VOLATILE / TRANSIENT_LOCAL</td>
                            <td>ëŠ¦ê²Œ ì°¸ì—¬í•œ êµ¬ë…ìì—ê²Œ ì´ì „ ë°ì´í„° ì œê³µ</td>
                        </tr>
                        <tr>
                            <td><strong>History</strong></td>
                            <td>KEEP_LAST(n) / KEEP_ALL</td>
                            <td>ë³´ê´€í•  ë©”ì‹œì§€ ìˆ˜</td>
                        </tr>
                        <tr>
                            <td><strong>Depth</strong></td>
                            <td>1, 10, 100...</td>
                            <td>í í¬ê¸°</td>
                        </tr>
                        <tr>
                            <td><strong>Deadline</strong></td>
                            <td>Duration</td>
                            <td>ë©”ì‹œì§€ ìˆ˜ì‹  ê¸°í•œ</td>
                        </tr>
                        <tr>
                            <td><strong>Lifespan</strong></td>
                            <td>Duration</td>
                            <td>ë©”ì‹œì§€ ìœ íš¨ ê¸°ê°„</td>
                        </tr>
                        <tr>
                            <td><strong>Liveliness</strong></td>
                            <td>AUTOMATIC / MANUAL</td>
                            <td>ë…¸ë“œ ìƒì¡´ í™•ì¸ ë°©ì‹</td>
                        </tr>
                    </tbody>
                </table>

                <h3>QoS í”„ë¡œíŒŒì¼ ì‚¬ìš©</h3>
<pre><code>import rclpy
from rclpy.node import Node
from rclpy.qos import QoSProfile, ReliabilityPolicy, HistoryPolicy, DurabilityPolicy
from sensor_msgs.msg import LaserScan
from geometry_msgs.msg import Twist

class QoSExampleNode(Node):
    def __init__(self):
        super().__init__('qos_example')

        # ì„¼ì„œ ë°ì´í„°ìš© QoS (ì†ë„ ìš°ì„ , ì†ì‹¤ í—ˆìš©)
        sensor_qos = QoSProfile(
            reliability=ReliabilityPolicy.BEST_EFFORT,
            history=HistoryPolicy.KEEP_LAST,
            depth=5,
            durability=DurabilityPolicy.VOLATILE
        )

        # ì œì–´ ëª…ë ¹ìš© QoS (ì‹ ë¢°ì„± ìš°ì„ )
        control_qos = QoSProfile(
            reliability=ReliabilityPolicy.RELIABLE,
            history=HistoryPolicy.KEEP_LAST,
            depth=10,
            durability=DurabilityPolicy.VOLATILE
        )

        # LiDAR êµ¬ë… (Best Effort)
        self.scan_sub = self.create_subscription(
            LaserScan,
            '/scan',
            self.scan_callback,
            sensor_qos
        )

        # ì†ë„ ëª…ë ¹ ë°œí–‰ (Reliable)
        self.cmd_pub = self.create_publisher(
            Twist,
            '/cmd_vel',
            control_qos
        )

    def scan_callback(self, msg):
        # ì„¼ì„œ ë°ì´í„° ì²˜ë¦¬
        pass</code></pre>

                <h3>í”„ë¦¬ì…‹ QoS í”„ë¡œíŒŒì¼</h3>
<pre><code>from rclpy.qos import qos_profile_sensor_data, qos_profile_system_default

# ì„¼ì„œ ë°ì´í„° (Best Effort, Depth=5)
self.create_subscription(LaserScan, '/scan', callback, qos_profile_sensor_data)

# ì¼ë°˜ í†µì‹  (Reliable, Depth=10)
self.create_subscription(String, '/status', callback, qos_profile_system_default)</code></pre>

                <h2 id="topics">í† í”½ (Topics) ì‹¬í™”</h2>
                <p>í† í”½ì€ ë¹„ë™ê¸° í¼ë¸”ë¦¬ì‹œ-ì„œë¸ŒìŠ¤í¬ë¼ì´ë¸Œ íŒ¨í„´ì…ë‹ˆë‹¤. 1:N, N:1, N:N í†µì‹ ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>

                <div class="diagram">
Publisher â”€â”€â”€â”€â”€â”€â–¶ Topic â”€â”€â”€â”€â”€â”€â–¶ Subscriber
   â”‚               â”‚               â”‚
   â”‚               â”‚               â–¼
   â”‚               â”‚          Subscriber
   â”‚               â”‚               â”‚
   â–¼               â”‚               â–¼
Publisher â”€â”€â”€â”€â”€â”€â”€â”€â”˜          Subscriber

      Many-to-Many Communication
                </div>

<pre><code># í† í”½ ëª©ë¡
ros2 topic list

# í† í”½ ì •ë³´ (íƒ€ì…, QoS, ë°œí–‰ì/êµ¬ë…ì ìˆ˜)
ros2 topic info /cmd_vel -v

# í† í”½ ëª¨ë‹ˆí„°ë§
ros2 topic echo /scan

# í† í”½ ë°œí–‰ë¥ 
ros2 topic hz /scan

# í† í”½ ì§€ì—°ì‹œê°„
ros2 topic delay /scan

# ëŒ€ì—­í­ ì¸¡ì •
ros2 topic bw /image_raw</code></pre>

                <h2 id="services">ì„œë¹„ìŠ¤ (Services) ì‹¬í™”</h2>
                <p>ì„œë¹„ìŠ¤ëŠ” ë™ê¸° ìš”ì²­-ì‘ë‹µ íŒ¨í„´ì…ë‹ˆë‹¤. 1:1 í†µì‹ ìœ¼ë¡œ ê²°ê³¼ë¥¼ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.</p>

                <div class="diagram">
Client â”€â”€â”€â”€ Request â”€â”€â”€â”€â–¶ Server
   â”‚                        â”‚
   â”‚                   Processing
   â”‚                        â”‚
   â””â—€â”€â”€â”€â”€ Response â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Synchronous Request-Response
                </div>

                <h3>ì„œë¹„ìŠ¤ ì •ì˜ (.srv)</h3>
<pre><code># srv/SetSpeed.srv
float32 linear_speed
float32 angular_speed
---
bool success
string message</code></pre>

                <h3>ì„œë¹„ìŠ¤ ì„œë²„ êµ¬í˜„</h3>
<pre><code>from jetbot_interfaces.srv import SetSpeed

class SpeedServiceNode(Node):
    def __init__(self):
        super().__init__('speed_service')
        self.srv = self.create_service(
            SetSpeed,
            'set_speed',
            self.set_speed_callback
        )

    def set_speed_callback(self, request, response):
        self.get_logger().info(
            f'Setting speed: linear={request.linear_speed}, '
            f'angular={request.angular_speed}'
        )

        # ì†ë„ ì„¤ì • ë¡œì§
        try:
            self.apply_speed(request.linear_speed, request.angular_speed)
            response.success = True
            response.message = 'Speed set successfully'
        except Exception as e:
            response.success = False
            response.message = str(e)

        return response</code></pre>

                <h3>ì„œë¹„ìŠ¤ í´ë¼ì´ì–¸íŠ¸</h3>
<pre><code>class SpeedClientNode(Node):
    def __init__(self):
        super().__init__('speed_client')
        self.cli = self.create_client(SetSpeed, 'set_speed')

        # ì„œë¹„ìŠ¤ ëŒ€ê¸°
        while not self.cli.wait_for_service(timeout_sec=1.0):
            self.get_logger().info('Waiting for service...')

    def send_request(self, linear, angular):
        request = SetSpeed.Request()
        request.linear_speed = linear
        request.angular_speed = angular

        # ë¹„ë™ê¸° í˜¸ì¶œ
        future = self.cli.call_async(request)
        future.add_done_callback(self.response_callback)

    def response_callback(self, future):
        response = future.result()
        self.get_logger().info(f'Result: {response.success}, {response.message}')</code></pre>

                <h2 id="actions">ì•¡ì…˜ (Actions) ì‹¬í™”</h2>
                <p>
                    ì•¡ì…˜ì€ ì¥ì‹œê°„ ì‹¤í–‰ ì‘ì—…ì„ ìœ„í•œ íŒ¨í„´ì…ë‹ˆë‹¤.
                    í”¼ë“œë°±ê³¼ ì·¨ì†Œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.
                </p>

                <div class="diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ACTION                                 â”‚
â”‚                                                               â”‚
â”‚   Client â”€â”€â”€â”€ Goal â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Server                          â”‚
â”‚      â”‚                          â”‚                            â”‚
â”‚      â”‚â—€â”€â”€â”€â”€ Goal Response â”€â”€â”€â”€â”€â”€â”¤                            â”‚
â”‚      â”‚                          â”‚                            â”‚
â”‚      â”‚â—€â”€â”€â”€â”€ Feedback â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ (periodic)                 â”‚
â”‚      â”‚â—€â”€â”€â”€â”€ Feedback â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                            â”‚
â”‚      â”‚                          â”‚                            â”‚
â”‚      â”‚â”€â”€â”€â”€ Cancel Request â”€â”€â”€â”€â”€â”€â–¶ (optional)                 â”‚
â”‚      â”‚                          â”‚                            â”‚
â”‚      â”‚â—€â”€â”€â”€â”€ Result â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                               â”‚
â”‚   Long-running task with feedback and cancellation           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                </div>

                <h3>ì•¡ì…˜ ì •ì˜ (.action)</h3>
<pre><code># action/Navigate.action

# Goal
geometry_msgs/PoseStamped target_pose
---
# Result
bool success
float32 total_distance
float32 total_time
---
# Feedback
geometry_msgs/PoseStamped current_pose
float32 distance_remaining
float32 estimated_time_remaining</code></pre>

                <h3>ì•¡ì…˜ ì„œë²„</h3>
<pre><code>from rclpy.action import ActionServer, CancelResponse, GoalResponse
from jetbot_interfaces.action import Navigate

class NavigateActionServer(Node):
    def __init__(self):
        super().__init__('navigate_server')
        self._action_server = ActionServer(
            self,
            Navigate,
            'navigate',
            execute_callback=self.execute_callback,
            goal_callback=self.goal_callback,
            cancel_callback=self.cancel_callback
        )

    def goal_callback(self, goal_request):
        """Goal ìˆ˜ë½/ê±°ë¶€ ê²°ì •"""
        self.get_logger().info('Received goal request')
        return GoalResponse.ACCEPT

    def cancel_callback(self, goal_handle):
        """ì·¨ì†Œ ìš”ì²­ ì²˜ë¦¬"""
        self.get_logger().info('Received cancel request')
        return CancelResponse.ACCEPT

    async def execute_callback(self, goal_handle):
        """ì‹¤ì œ ì‘ì—… ìˆ˜í–‰"""
        self.get_logger().info('Executing goal...')

        feedback_msg = Navigate.Feedback()
        result = Navigate.Result()

        # ì£¼ê¸°ì ìœ¼ë¡œ í”¼ë“œë°± ì „ì†¡
        for i in range(100):
            if goal_handle.is_cancel_requested:
                goal_handle.canceled()
                result.success = False
                return result

            feedback_msg.distance_remaining = 100.0 - i
            goal_handle.publish_feedback(feedback_msg)
            await asyncio.sleep(0.1)

        goal_handle.succeed()
        result.success = True
        result.total_distance = 10.0
        return result</code></pre>

                <h2 id="parameters">íŒŒë¼ë¯¸í„° ì‹œìŠ¤í…œ</h2>
                <p>ë…¸ë“œì˜ ì„¤ì •ê°’ì„ ëŸ°íƒ€ì„ì— ë™ì ìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<pre><code>class ParameterNode(Node):
    def __init__(self):
        super().__init__('param_node')

        # íŒŒë¼ë¯¸í„° ì„ ì–¸
        self.declare_parameter('max_speed', 1.0)
        self.declare_parameter('wheelbase', 0.15)
        self.declare_parameter('control_frequency', 50)

        # íŒŒë¼ë¯¸í„° ì½œë°± ë“±ë¡
        self.add_on_set_parameters_callback(self.parameter_callback)

    def parameter_callback(self, params):
        """íŒŒë¼ë¯¸í„° ë³€ê²½ ì‹œ í˜¸ì¶œ"""
        for param in params:
            self.get_logger().info(f'Parameter {param.name} changed to {param.value}')

            if param.name == 'max_speed':
                if param.value < 0 or param.value > 2.0:
                    return SetParametersResult(
                        successful=False,
                        reason='max_speed must be between 0 and 2.0'
                    )

        return SetParametersResult(successful=True)</code></pre>

<pre><code># CLIì—ì„œ íŒŒë¼ë¯¸í„° ì¡°ì‘
ros2 param list /motor_driver
ros2 param get /motor_driver max_speed
ros2 param set /motor_driver max_speed 0.5

# YAML íŒŒì¼ë¡œ íŒŒë¼ë¯¸í„° ë¡œë“œ
ros2 run jetbot_ros2 motor_driver --ros-args \
    --params-file config/motor_params.yaml</code></pre>

                <h2 id="lifecycle">Lifecycle ë…¸ë“œ</h2>
                <p>
                    Lifecycle ë…¸ë“œëŠ” ìƒíƒœ ë¨¸ì‹ ì„ ì œê³µí•˜ì—¬ ë…¸ë“œì˜ ì‹œì‘/ì¢…ë£Œë¥¼
                    ì˜ˆì¸¡ ê°€ëŠ¥í•˜ê²Œ ê´€ë¦¬í•©ë‹ˆë‹¤. ì‚°ì—…ìš© ë¡œë´‡ì—ì„œ í•„ìˆ˜ì ì…ë‹ˆë‹¤.
                </p>

                <div class="diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LIFECYCLE STATE MACHINE                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    configure()    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚    â”‚ Unconfiguredâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Inactive   â”‚            â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚           â–²                                 â”‚                    â”‚
â”‚           â”‚ cleanup()                       â”‚ activate()         â”‚
â”‚           â”‚                                 â–¼                    â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”    deactivate()   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚    â”‚  Inactive   â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   Active    â”‚            â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                  â”‚
â”‚    Any State â”€â”€â”€â”€â”€â”€â”€ shutdown() â”€â”€â”€â”€â”€â–¶ Finalized                â”‚
â”‚                                                                  â”‚
â”‚    Any State â”€â”€â”€â”€â”€â”€â”€ error â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Error Handling           â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                </div>

<pre><code>from rclpy.lifecycle import Node as LifecycleNode
from rclpy.lifecycle import State, TransitionCallbackReturn

class MotorDriverLifecycle(LifecycleNode):
    def __init__(self):
        super().__init__('motor_driver_lifecycle')
        self.kit = None

    def on_configure(self, state: State) -> TransitionCallbackReturn:
        """í•˜ë“œì›¨ì–´ ì´ˆê¸°í™”"""
        self.get_logger().info('Configuring...')
        try:
            self.kit = ServoKit(channels=16)
            return TransitionCallbackReturn.SUCCESS
        except Exception as e:
            self.get_logger().error(f'Configuration failed: {e}')
            return TransitionCallbackReturn.FAILURE

    def on_activate(self, state: State) -> TransitionCallbackReturn:
        """êµ¬ë…ì/ë°œí–‰ì í™œì„±í™”"""
        self.get_logger().info('Activating...')
        self.subscription = self.create_subscription(
            Twist, 'cmd_vel', self.cmd_vel_callback, 10
        )
        return TransitionCallbackReturn.SUCCESS

    def on_deactivate(self, state: State) -> TransitionCallbackReturn:
        """ëª¨í„° ì •ì§€, êµ¬ë… í•´ì œ"""
        self.get_logger().info('Deactivating...')
        self.stop_motors()
        self.destroy_subscription(self.subscription)
        return TransitionCallbackReturn.SUCCESS

    def on_cleanup(self, state: State) -> TransitionCallbackReturn:
        """ë¦¬ì†ŒìŠ¤ í•´ì œ"""
        self.get_logger().info('Cleaning up...')
        self.kit = None
        return TransitionCallbackReturn.SUCCESS

    def on_shutdown(self, state: State) -> TransitionCallbackReturn:
        """ìµœì¢… ì¢…ë£Œ"""
        self.get_logger().info('Shutting down...')
        return TransitionCallbackReturn.SUCCESS</code></pre>

<pre><code># Lifecycle ë…¸ë“œ ì œì–´
ros2 lifecycle list /motor_driver_lifecycle
ros2 lifecycle set /motor_driver_lifecycle configure
ros2 lifecycle set /motor_driver_lifecycle activate
ros2 lifecycle set /motor_driver_lifecycle deactivate
ros2 lifecycle set /motor_driver_lifecycle shutdown</code></pre>

                <h2 id="composition">ë…¸ë“œ ì»´í¬ì§€ì…˜</h2>
                <p>
                    ì—¬ëŸ¬ ë…¸ë“œë¥¼ ë‹¨ì¼ í”„ë¡œì„¸ìŠ¤ì—ì„œ ì‹¤í–‰í•˜ì—¬ ì˜¤ë²„í—¤ë“œë¥¼ ì¤„ì…ë‹ˆë‹¤.
                    Intra-process í†µì‹ ê³¼ ê²°í•©í•˜ë©´ Zero-Copyê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
                </p>

                <div class="diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 WITHOUT COMPOSITION                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚Process 1â”‚    â”‚Process 2â”‚    â”‚Process 3â”‚    â”‚Process 4â”‚   â”‚
â”‚   â”‚ Node A  â”‚â”€â”€â”€â–¶â”‚ Node B  â”‚â”€â”€â”€â–¶â”‚ Node C  â”‚â”€â”€â”€â–¶â”‚ Node D  â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                  (IPC Overhead)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  WITH COMPOSITION                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                    Single Process                        â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚   â”‚   â”‚ Node A â”‚â”€â”€â–¶â”‚ Node B â”‚â”€â”€â–¶â”‚ Node C â”‚â”€â”€â–¶â”‚ Node D â”‚    â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚   â”‚              (Intra-process, Zero-Copy)                  â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                </div>

<pre><code># component_containerë¡œ ë…¸ë“œ ë¡œë“œ
ros2 run rclcpp_components component_container

# ë‹¤ë¥¸ í„°ë¯¸ë„ì—ì„œ ì»´í¬ë„ŒíŠ¸ ë¡œë“œ
ros2 component load /ComponentManager \
    composition composition::Talker
ros2 component load /ComponentManager \
    composition composition::Listener

# ì»´í¬ë„ŒíŠ¸ ëª©ë¡ í™•ì¸
ros2 component list</code></pre>

                <h2 id="executors">Executors ì´í•´</h2>
                <p>
                    ExecutorëŠ” ì½œë°±ì„ ì‹¤í–‰í•˜ëŠ” ìŠ¤ì¼€ì¤„ëŸ¬ì…ë‹ˆë‹¤.
                    ì‹±ê¸€ ìŠ¤ë ˆë“œì™€ ë©€í‹° ìŠ¤ë ˆë“œ ì˜µì…˜ì´ ìˆìŠµë‹ˆë‹¤.
                </p>

<pre><code>import rclpy
from rclpy.executors import SingleThreadedExecutor, MultiThreadedExecutor

def main():
    rclpy.init()

    node1 = MotorDriverNode()
    node2 = SensorNode()

    # ì‹±ê¸€ ìŠ¤ë ˆë“œ (ê¸°ë³¸)
    executor = SingleThreadedExecutor()
    executor.add_node(node1)
    executor.add_node(node2)

    # ë©€í‹° ìŠ¤ë ˆë“œ (ë³‘ë ¬ ì½œë°±)
    # executor = MultiThreadedExecutor(num_threads=4)

    try:
        executor.spin()
    finally:
        executor.shutdown()
        rclpy.shutdown()</code></pre>

                <h2 id="callbacks">ì½œë°± ê·¸ë£¹</h2>
                <p>ì½œë°±ì˜ ë™ì‹œ ì‹¤í–‰ ì—¬ë¶€ë¥¼ ì œì–´í•©ë‹ˆë‹¤.</p>

<pre><code>from rclpy.callback_groups import MutuallyExclusiveCallbackGroup, ReentrantCallbackGroup

class CallbackGroupNode(Node):
    def __init__(self):
        super().__init__('callback_group_node')

        # ìƒí˜¸ ë°°íƒ€ì  (ë™ì‹œ ì‹¤í–‰ ë¶ˆê°€)
        self.exclusive_group = MutuallyExclusiveCallbackGroup()

        # ì¬ì§„ì… ê°€ëŠ¥ (ë™ì‹œ ì‹¤í–‰ í—ˆìš©)
        self.reentrant_group = ReentrantCallbackGroup()

        # ì„¼ì„œ ì½œë°± - ë™ì‹œ ì‹¤í–‰ í—ˆìš©
        self.sub1 = self.create_subscription(
            LaserScan, '/scan', self.scan_callback,
            10, callback_group=self.reentrant_group
        )

        # ì œì–´ ì½œë°± - ë™ì‹œ ì‹¤í–‰ ë¶ˆê°€
        self.sub2 = self.create_subscription(
            Twist, '/cmd_vel', self.cmd_callback,
            10, callback_group=self.exclusive_group
        )

        # íƒ€ì´ë¨¸ - ì œì–´ì™€ ìƒí˜¸ ë°°íƒ€
        self.timer = self.create_timer(
            0.1, self.timer_callback,
            callback_group=self.exclusive_group
        )</code></pre>

                <h2 id="realtime">ì‹¤ì‹œê°„ ROS 2</h2>
                <p>
                    ì‹¤ì‹œê°„ ì‹œìŠ¤í…œì—ì„œëŠ” ê²°ì •ë¡ ì  íƒ€ì´ë°ì´ í•„ìš”í•©ë‹ˆë‹¤.
                    ROS 2ëŠ” ì‹¤ì‹œê°„ ì§€ì›ì„ ìœ„í•œ ì—¬ëŸ¬ ê¸°ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.
                </p>

                <h3>ì‹¤ì‹œê°„ ìš”êµ¬ì‚¬í•­</h3>
                <ul>
                    <li>ë™ì  ë©”ëª¨ë¦¬ í• ë‹¹ íšŒí”¼</li>
                    <li>ë½-í”„ë¦¬ í†µì‹ </li>
                    <li>ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ìŠ¤ì¼€ì¤„ë§</li>
                    <li>RT-PREEMPT ì»¤ë„</li>
                </ul>

<pre><code># PREEMPT_RT ì»¤ë„ í™•ì¸
uname -a  # PREEMPT_RT í¬í•¨ í™•ì¸

# ì‹¤ì‹œê°„ ìš°ì„ ìˆœìœ„ ì„¤ì •
sudo chrt -f 99 ros2 run jetbot_ros2 motor_driver

# CPU affinity ì„¤ì •
taskset -c 0 ros2 run jetbot_ros2 motor_driver</code></pre>

                <h3>ì‹¤ì‹œê°„ ë…¸ë“œ ì„¤ì •</h3>
<pre><code>from rclpy.executors import SingleThreadedExecutor
from rclpy.qos import QoSProfile, QoSReliabilityPolicy

def main():
    rclpy.init()

    node = MotorDriverNode()
    executor = SingleThreadedExecutor()
    executor.add_node(node)

    # ë©”ëª¨ë¦¬ í”„ë¦¬ë¡œë“œ
    node.pre_allocate_memory()

    # ìš°ì„ ìˆœìœ„ ì„¤ì • (Linux)
    import os
    os.sched_setscheduler(0, os.SCHED_FIFO, os.sched_param(99))

    executor.spin()</code></pre>

                <h2 id="intra-process">Intra-Process í†µì‹ </h2>
                <p>
                    ê°™ì€ í”„ë¡œì„¸ìŠ¤ ë‚´ ë…¸ë“œ ê°„ Zero-Copy í†µì‹ ìœ¼ë¡œ
                    ì§€ì—°ì‹œê°„ì„ ìµœì†Œí™”í•©ë‹ˆë‹¤.
                </p>

<pre><code>from rclpy.node import Node

class ImagePublisher(Node):
    def __init__(self):
        super().__init__('image_publisher')

        # Intra-process í™œì„±í™”
        self.publisher = self.create_publisher(
            Image,
            'image',
            10,
            # callback_groupì€ ì»´í¬ì§€ì…˜ê³¼ í•¨ê»˜ ì‚¬ìš©
        )

    def publish_image(self, img_data):
        msg = Image()
        msg.data = img_data

        # loan_messageë¡œ Zero-Copy
        loaned_msg = self.publisher.borrow_loaned_message()
        loaned_msg.data = img_data
        self.publisher.publish(loaned_msg)</code></pre>

                <h2 id="colcon">Colcon ë¹Œë“œ ì‹œìŠ¤í…œ</h2>

<pre><code># ì „ì²´ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ë¹Œë“œ
colcon build

# íŠ¹ì • íŒ¨í‚¤ì§€ë§Œ ë¹Œë“œ
colcon build --packages-select jetbot_ros2

# ì˜ì¡´ì„± í¬í•¨ ë¹Œë“œ
colcon build --packages-up-to jetbot_ros2

# ë¹Œë“œ ì˜µì…˜
colcon build \
    --symlink-install \           # ì‹¬ë³¼ë¦­ ë§í¬ (Python ìˆ˜ì • ì¦‰ì‹œ ë°˜ì˜)
    --cmake-args -DCMAKE_BUILD_TYPE=Release \
    --parallel-workers 4

# í…ŒìŠ¤íŠ¸ ì‹¤í–‰
colcon test --packages-select jetbot_ros2
colcon test-result --verbose</code></pre>

                <h2 id="launch">Launch ì‹œìŠ¤í…œ ì‹¬í™”</h2>

<pre><code># launch/jetbot_full.launch.py
from launch import LaunchDescription
from launch.actions import DeclareLaunchArgument, IncludeLaunchDescription
from launch.conditions import IfCondition
from launch.substitutions import LaunchConfiguration, PathJoinSubstitution
from launch_ros.actions import Node
from launch_ros.substitutions import FindPackageShare

def generate_launch_description():
    # ëŸ°ì¹˜ ì¸ì ì„ ì–¸
    use_sim = DeclareLaunchArgument(
        'use_sim',
        default_value='false',
        description='Use simulation'
    )

    robot_name = DeclareLaunchArgument(
        'robot_name',
        default_value='jetbot',
        description='Robot namespace'
    )

    # ì„¤ì • íŒŒì¼ ê²½ë¡œ
    config_file = PathJoinSubstitution([
        FindPackageShare('jetbot_ros2'),
        'config',
        'params.yaml'
    ])

    # ë…¸ë“œ ì •ì˜
    motor_driver = Node(
        package='jetbot_ros2',
        executable='motor_driver',
        name='motor_driver',
        namespace=LaunchConfiguration('robot_name'),
        parameters=[config_file],
        remappings=[
            ('cmd_vel', 'cmd_vel_nav')
        ],
        condition=IfCondition(
            LaunchConfiguration('use_sim').perform(context) == 'false'
        )
    )

    # ë‹¤ë¥¸ ëŸ°ì¹˜ íŒŒì¼ í¬í•¨
    slam_launch = IncludeLaunchDescription(
        PathJoinSubstitution([
            FindPackageShare('slam_toolbox'),
            'launch',
            'online_async_launch.py'
        ]),
        launch_arguments={
            'use_sim_time': LaunchConfiguration('use_sim')
        }.items()
    )

    return LaunchDescription([
        use_sim,
        robot_name,
        motor_driver,
        slam_launch
    ])</code></pre>

                <h2 id="debugging">ë””ë²„ê¹… ê¸°ë²•</h2>

<pre><code># ë…¸ë“œ ê·¸ë˜í”„ ì‹œê°í™”
ros2 run rqt_graph rqt_graph

# TF íŠ¸ë¦¬ ì‹œê°í™”
ros2 run rqt_tf_tree rqt_tf_tree

# í† í”½ ëª¨ë‹ˆí„°ë§
ros2 run rqt_topic rqt_topic

# ë…¸ë“œ ì •ë³´
ros2 node info /motor_driver

# ë¡œê·¸ ë ˆë²¨ ë³€ê²½
ros2 service call /motor_driver/set_logger_level \
    rcl_interfaces/srv/SetLoggerLevel \
    "{logger_name: 'motor_driver', level: 10}"  # DEBUG=10

# bag ë…¹í™”/ì¬ìƒ
ros2 bag record -a -o my_bag
ros2 bag play my_bag

# ì„±ëŠ¥ í”„ë¡œíŒŒì¼ë§
ros2 run tracetools_analysis ros2_tracing</code></pre>

                <div class="alert alert-success">
                    <strong>ì‹¬í™” í•™ìŠµìœ¼ë¡œ!</strong>
                    ROS 2 í•µì‹¬ ê°œë…ì„ ì´í•´í–ˆë‹¤ë©´, ì•„ë˜ ì‹¬í™” ë¬¸ì„œë“¤ë¡œ ì§„í–‰í•˜ì„¸ìš”.
                </div>

                <h3>ì‹¬í™” ë¬¸ì„œ ë°”ë¡œê°€ê¸°</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin: 1.5rem 0;">
                    <a href="visualization.html" style="display: block; padding: 1.5rem; background: var(--card-bg); border-radius: 8px; text-decoration: none; border: 1px solid var(--border-color);">
                        <h4 style="margin: 0 0 0.5rem 0; color: var(--primary-color);">ğŸ“Š ì‹œê°í™” ë„êµ¬</h4>
                        <p style="margin: 0; color: var(--text-secondary); font-size: 0.9rem;">RViz 2, RQt, Gazebo ì‹œë®¬ë ˆì´ì…˜</p>
                    </a>
                    <a href="slam.html" style="display: block; padding: 1.5rem; background: var(--card-bg); border-radius: 8px; text-decoration: none; border: 1px solid var(--border-color);">
                        <h4 style="margin: 0 0 0.5rem 0; color: var(--primary-color);">ğŸ—ºï¸ SLAM</h4>
                        <p style="margin: 0; color: var(--text-secondary); font-size: 0.9rem;">SLAM Toolbox, Cartographer, ì§€ë„ ê´€ë¦¬</p>
                    </a>
                    <a href="navigation.html" style="display: block; padding: 1.5rem; background: var(--card-bg); border-radius: 8px; text-decoration: none; border: 1px solid var(--border-color);">
                        <h4 style="margin: 0 0 0.5rem 0; color: var(--primary-color);">ğŸ§­ Navigation</h4>
                        <p style="margin: 0; color: var(--text-secondary); font-size: 0.9rem;">Nav2, Costmap, Path Planning, Controllers</p>
                    </a>
                </div>

                <h3>ì¶”ê°€ í•™ìŠµ ìë£Œ</h3>
                <ul>
                    <li><a href="https://docs.ros.org/en/humble/" target="_blank">ROS 2 Humble Documentation</a></li>
                    <li><a href="https://navigation.ros.org/" target="_blank">Nav2 Documentation</a></li>
                    <li><a href="https://design.ros2.org/" target="_blank">ROS 2 Design Documentation</a></li>
                    <li><a href="https://github.com/ros2/examples" target="_blank">ROS 2 Examples Repository</a></li>
                </ul>

                <div style="margin-top: 3rem; padding-top: 2rem; border-top: 1px solid var(--border-color);">
                    <p style="text-align: center;">
                        <a href="ros2.html" class="btn btn-secondary">&larr; ì´ì „: ROS2 êµ¬í˜„</a>
                        <a href="visualization.html" class="btn btn-primary" style="margin-left: 1rem;">ë‹¤ìŒ: ì‹œê°í™” ë„êµ¬ &rarr;</a>
                    </p>
                </div>
            </article>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-logo">
            <img src="https://raw.githubusercontent.com/hwkim3330/roii/refs/heads/main/keti.png" alt="KETI">
        </div>
        <p>
            JetBot ROS2 Documentation &copy; 2024 KETI |
            <a href="https://github.com/hwkim3330/jetbot-docs" target="_blank">GitHub</a>
        </p>
    </footer>
</body>
</html>
