<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROS ì‹¬í™”ê³¼ì • - JetBot ROS2</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¤–</text></svg>">
</head>
<body>
    <nav class="navbar">
        <div class="navbar-content">
            <a href="index.html" class="logo">
                <img src="https://raw.githubusercontent.com/hwkim3330/roii/refs/heads/main/keti.png" alt="KETI" class="logo-img">
                <div class="logo-text">
                    <span class="main">JetBot ROS2</span>
                    <span class="sub">Orin Nano Guide</span>
                </div>
            </a>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="hardware.html">Hardware</a></li>
                <li><a href="software.html">Software</a></li>
                <li><a href="ros2.html">ROS2</a></li>
                <li><a href="ros-advanced.html" class="active">ROS ì‹¬í™”</a></li>
                <li><a href="web-tools.html">Web Tools</a></li>
                <li><a href="reference.html">Reference</a></li>
            </ul>
            <a href="https://github.com/hwkim3330/jetbot-docs" class="nav-github" target="_blank">
                <svg width="20" height="20" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
                </svg>
                GitHub
            </a>
        </div>
    </nav>

    <main class="main-content">
        <div class="doc-layout">
            <aside class="doc-sidebar">
                <h4>ROS 2 í•µì‹¬ ê°œë…</h4>
                <ul>
                    <li><a href="#ros2-architecture">ì•„í‚¤í…ì²˜ ê°œìš”</a></li>
                    <li><a href="#dds">DDS ë¯¸ë“¤ì›¨ì–´</a></li>
                    <li><a href="#qos">QoS í”„ë¡œíŒŒì¼</a></li>
                </ul>
                <h4>í†µì‹  ë©”ì»¤ë‹ˆì¦˜</h4>
                <ul>
                    <li><a href="#topics">í† í”½ (Topics)</a></li>
                    <li><a href="#services">ì„œë¹„ìŠ¤ (Services)</a></li>
                    <li><a href="#actions">ì•¡ì…˜ (Actions)</a></li>
                    <li><a href="#parameters">íŒŒë¼ë¯¸í„°</a></li>
                </ul>
                <h4>ê³ ê¸‰ ê¸°ëŠ¥</h4>
                <ul>
                    <li><a href="#lifecycle">Lifecycle ë…¸ë“œ</a></li>
                    <li><a href="#composition">ë…¸ë“œ ì»´í¬ì§€ì…˜</a></li>
                    <li><a href="#executors">Executors</a></li>
                    <li><a href="#callbacks">ì½œë°± ê·¸ë£¹</a></li>
                </ul>
                <h4>ì‹¤ì‹œê°„ ì²˜ë¦¬</h4>
                <ul>
                    <li><a href="#realtime">ì‹¤ì‹œê°„ ROS 2</a></li>
                    <li><a href="#intra-process">Intra-Process</a></li>
                </ul>
                <h4>ì‹œê°í™” ë„êµ¬</h4>
                <ul>
                    <li><a href="#rviz">RViz 2</a></li>
                    <li><a href="#rqt">RQt ë„êµ¬</a></li>
                    <li><a href="#gazebo">Gazebo ì‹œë®¬ë ˆì´ì…˜</a></li>
                </ul>
                <h4>SLAM & Navigation</h4>
                <ul>
                    <li><a href="#slam-theory">SLAM ì´ë¡ </a></li>
                    <li><a href="#slam-toolbox">SLAM Toolbox</a></li>
                    <li><a href="#cartographer">Cartographer</a></li>
                    <li><a href="#nav2-deep">Nav2 ì‹¬í™”</a></li>
                    <li><a href="#costmap">Costmap ì„¤ì •</a></li>
                    <li><a href="#path-planning">ê²½ë¡œ ê³„íš</a></li>
                </ul>
                <h4>ê°œë°œ ë„êµ¬</h4>
                <ul>
                    <li><a href="#colcon">Colcon ë¹Œë“œ</a></li>
                    <li><a href="#launch">Launch ì‹œìŠ¤í…œ</a></li>
                    <li><a href="#debugging">ë””ë²„ê¹… ê¸°ë²•</a></li>
                </ul>
            </aside>

            <article class="doc-content">
                <div class="breadcrumb">
                    <a href="index.html">Home</a> / <span>ROS ì‹¬í™”ê³¼ì •</span>
                </div>

                <h1 id="ros2-architecture">ROS 2 ì•„í‚¤í…ì²˜ ì‹¬ì¸µ ë¶„ì„</h1>
                <p>
                    ROS 2ëŠ” ROS 1ì˜ í•œê³„ë¥¼ ê·¹ë³µí•˜ê¸° ìœ„í•´ ì™„ì „íˆ ìƒˆë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.
                    ì‚°ì—…ìš© í‘œì¤€ì¸ <strong>DDS (Data Distribution Service)</strong>ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ì—¬
                    ì‹¤ì‹œê°„ì„±, ë³´ì•ˆ, ë©€í‹° ë¡œë´‡ ì§€ì›ì„ ì œê³µí•©ë‹ˆë‹¤.
                </p>

                <div class="diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ROS 2 ARCHITECTURE                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                     APPLICATION LAYER                            â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚   â”‚   â”‚  Nodes   â”‚  â”‚  Topics  â”‚  â”‚ Services â”‚  â”‚   Actions    â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                   â”‚                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                       RCL (ROS Client Library)                   â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚   â”‚   â”‚  rclpy  â”‚  â”‚  rclcpp â”‚  â”‚  rclrs  â”‚  â”‚  rcljava, etc.  â”‚   â”‚   â”‚
â”‚   â”‚   â”‚ Python  â”‚  â”‚   C++   â”‚  â”‚  Rust   â”‚  â”‚  Other langs    â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                   â”‚                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                          RMW (ROS Middleware)                    â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚   â”‚   â”‚ rmw_fastrtps â”‚  â”‚ rmw_cyclone  â”‚  â”‚  rmw_connextdds  â”‚     â”‚   â”‚
â”‚   â”‚   â”‚  (default)   â”‚  â”‚    dds       â”‚  â”‚    (RTI)         â”‚     â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                   â”‚                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                    DDS (Data Distribution Service)               â”‚   â”‚
â”‚   â”‚           OMG Standard | RTPS Protocol | UDP/TCP Transport       â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                </div>

                <h3>ROS 1 vs ROS 2 ë¹„êµ</h3>
                <table class="specs-table">
                    <thead>
                        <tr>
                            <th>í•­ëª©</th>
                            <th>ROS 1</th>
                            <th>ROS 2</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>ë¯¸ë“¤ì›¨ì–´</td>
                            <td>ì»¤ìŠ¤í…€ (TCPROS/UDPROS)</td>
                            <td>DDS (ì‚°ì—… í‘œì¤€)</td>
                        </tr>
                        <tr>
                            <td>ë§ˆìŠ¤í„° ë…¸ë“œ</td>
                            <td>í•„ìˆ˜ (roscore)</td>
                            <td>ë¶ˆí•„ìš” (ë¶„ì‚° íƒìƒ‰)</td>
                        </tr>
                        <tr>
                            <td>ì‹¤ì‹œê°„ ì§€ì›</td>
                            <td>ì œí•œì </td>
                            <td>ë„¤ì´í‹°ë¸Œ ì§€ì›</td>
                        </tr>
                        <tr>
                            <td>ë³´ì•ˆ</td>
                            <td>ì—†ìŒ</td>
                            <td>DDS-Security</td>
                        </tr>
                        <tr>
                            <td>ë©€í‹° ë¡œë´‡</td>
                            <td>ë³µì¡</td>
                            <td>Domain IDë¡œ ê°„ë‹¨</td>
                        </tr>
                        <tr>
                            <td>í”Œë«í¼</td>
                            <td>Linux ì¤‘ì‹¬</td>
                            <td>Windows, macOS, RTOS</td>
                        </tr>
                        <tr>
                            <td>ë¹Œë“œ ì‹œìŠ¤í…œ</td>
                            <td>catkin</td>
                            <td>colcon + ament</td>
                        </tr>
                    </tbody>
                </table>

                <h2 id="dds">DDS ë¯¸ë“¤ì›¨ì–´ ì´í•´</h2>
                <p>
                    DDS(Data Distribution Service)ëŠ” OMG(Object Management Group)ì—ì„œ ì •ì˜í•œ
                    ë°ì´í„° ì¤‘ì‹¬ í¼ë¸”ë¦¬ì‹œ-ì„œë¸ŒìŠ¤í¬ë¼ì´ë¸Œ í‘œì¤€ì…ë‹ˆë‹¤.
                </p>

                <h3>DDS í•µì‹¬ ê°œë…</h3>
                <div class="diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     DDS DOMAIN (Domain ID: 0)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚   DomainParticipant â”‚          â”‚   DomainParticipant â”‚        â”‚
â”‚   â”‚     (Node A)        â”‚          â”‚     (Node B)        â”‚        â”‚
â”‚   â”‚                     â”‚          â”‚                     â”‚        â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   RTPS   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚        â”‚
â”‚   â”‚  â”‚  DataWriter  â”‚â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â–¶â”‚  DataReader  â”‚  â”‚        â”‚
â”‚   â”‚  â”‚  (Publisher) â”‚  â”‚  UDP/TCP â”‚  â”‚ (Subscriber) â”‚  â”‚        â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚        â”‚
â”‚   â”‚                     â”‚          â”‚                     â”‚        â”‚
â”‚   â”‚  Topic: /cmd_vel   â”‚          â”‚  Topic: /cmd_vel   â”‚        â”‚
â”‚   â”‚  Type: Twist       â”‚          â”‚  Type: Twist       â”‚        â”‚
â”‚   â”‚  QoS: Reliable     â”‚          â”‚  QoS: Reliable     â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                </div>

                <h3>RMW êµ¬í˜„ì²´ ì„ íƒ</h3>
<pre><code># í˜„ì¬ RMW í™•ì¸
echo $RMW_IMPLEMENTATION

# Fast DDS (ê¸°ë³¸ê°’)
export RMW_IMPLEMENTATION=rmw_fastrtps_cpp

# Cyclone DDS (ê²½ëŸ‰, ì„ë² ë””ë“œ ì í•©)
sudo apt install ros-humble-rmw-cyclonedds-cpp
export RMW_IMPLEMENTATION=rmw_cyclonedds_cpp

# ì˜êµ¬ ì„¤ì •
echo "export RMW_IMPLEMENTATION=rmw_cyclonedds_cpp" >> ~/.bashrc</code></pre>

                <div class="alert alert-info">
                    <strong>JetBot ê¶Œì¥:</strong> Cyclone DDSëŠ” ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ì ì–´
                    Jetsonê³¼ ê°™ì€ ì„ë² ë””ë“œ ì‹œìŠ¤í…œì— ì í•©í•©ë‹ˆë‹¤.
                </div>

                <h3>ë©€í‹° ë¡œë´‡ í™˜ê²½: Domain ID</h3>
<pre><code># ë¡œë´‡ 1 (Domain 0)
export ROS_DOMAIN_ID=0
ros2 run jetbot_ros2 motor_driver

# ë¡œë´‡ 2 (Domain 1) - ì™„ì „íˆ ë¶„ë¦¬ëœ ë„¤íŠ¸ì›Œí¬
export ROS_DOMAIN_ID=1
ros2 run jetbot_ros2 motor_driver

# ê°™ì€ Domainì˜ ëª¨ë“  ë…¸ë“œ í™•ì¸
ros2 node list</code></pre>

                <h2 id="qos">QoS (Quality of Service) í”„ë¡œíŒŒì¼</h2>
                <p>
                    QoSëŠ” í†µì‹ ì˜ ì‹ ë¢°ì„±, ì§€ì—°ì‹œê°„, ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ì„ ì œì–´í•©ë‹ˆë‹¤.
                    ì„¼ì„œ ë°ì´í„°ì™€ ì œì–´ ëª…ë ¹ì— ì„œë¡œ ë‹¤ë¥¸ QoSë¥¼ ì ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
                </p>

                <h3>QoS ì •ì±… ì¢…ë¥˜</h3>
                <table class="specs-table">
                    <thead>
                        <tr>
                            <th>ì •ì±…</th>
                            <th>ì˜µì…˜</th>
                            <th>ì„¤ëª…</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Reliability</strong></td>
                            <td>RELIABLE / BEST_EFFORT</td>
                            <td>ë©”ì‹œì§€ ì „ë‹¬ ë³´ì¥ ì—¬ë¶€</td>
                        </tr>
                        <tr>
                            <td><strong>Durability</strong></td>
                            <td>VOLATILE / TRANSIENT_LOCAL</td>
                            <td>ëŠ¦ê²Œ ì°¸ì—¬í•œ êµ¬ë…ìì—ê²Œ ì´ì „ ë°ì´í„° ì œê³µ</td>
                        </tr>
                        <tr>
                            <td><strong>History</strong></td>
                            <td>KEEP_LAST(n) / KEEP_ALL</td>
                            <td>ë³´ê´€í•  ë©”ì‹œì§€ ìˆ˜</td>
                        </tr>
                        <tr>
                            <td><strong>Depth</strong></td>
                            <td>1, 10, 100...</td>
                            <td>í í¬ê¸°</td>
                        </tr>
                        <tr>
                            <td><strong>Deadline</strong></td>
                            <td>Duration</td>
                            <td>ë©”ì‹œì§€ ìˆ˜ì‹  ê¸°í•œ</td>
                        </tr>
                        <tr>
                            <td><strong>Lifespan</strong></td>
                            <td>Duration</td>
                            <td>ë©”ì‹œì§€ ìœ íš¨ ê¸°ê°„</td>
                        </tr>
                        <tr>
                            <td><strong>Liveliness</strong></td>
                            <td>AUTOMATIC / MANUAL</td>
                            <td>ë…¸ë“œ ìƒì¡´ í™•ì¸ ë°©ì‹</td>
                        </tr>
                    </tbody>
                </table>

                <h3>QoS í”„ë¡œíŒŒì¼ ì‚¬ìš©</h3>
<pre><code>import rclpy
from rclpy.node import Node
from rclpy.qos import QoSProfile, ReliabilityPolicy, HistoryPolicy, DurabilityPolicy
from sensor_msgs.msg import LaserScan
from geometry_msgs.msg import Twist

class QoSExampleNode(Node):
    def __init__(self):
        super().__init__('qos_example')

        # ì„¼ì„œ ë°ì´í„°ìš© QoS (ì†ë„ ìš°ì„ , ì†ì‹¤ í—ˆìš©)
        sensor_qos = QoSProfile(
            reliability=ReliabilityPolicy.BEST_EFFORT,
            history=HistoryPolicy.KEEP_LAST,
            depth=5,
            durability=DurabilityPolicy.VOLATILE
        )

        # ì œì–´ ëª…ë ¹ìš© QoS (ì‹ ë¢°ì„± ìš°ì„ )
        control_qos = QoSProfile(
            reliability=ReliabilityPolicy.RELIABLE,
            history=HistoryPolicy.KEEP_LAST,
            depth=10,
            durability=DurabilityPolicy.VOLATILE
        )

        # LiDAR êµ¬ë… (Best Effort)
        self.scan_sub = self.create_subscription(
            LaserScan,
            '/scan',
            self.scan_callback,
            sensor_qos
        )

        # ì†ë„ ëª…ë ¹ ë°œí–‰ (Reliable)
        self.cmd_pub = self.create_publisher(
            Twist,
            '/cmd_vel',
            control_qos
        )

    def scan_callback(self, msg):
        # ì„¼ì„œ ë°ì´í„° ì²˜ë¦¬
        pass</code></pre>

                <h3>í”„ë¦¬ì…‹ QoS í”„ë¡œíŒŒì¼</h3>
<pre><code>from rclpy.qos import qos_profile_sensor_data, qos_profile_system_default

# ì„¼ì„œ ë°ì´í„° (Best Effort, Depth=5)
self.create_subscription(LaserScan, '/scan', callback, qos_profile_sensor_data)

# ì¼ë°˜ í†µì‹  (Reliable, Depth=10)
self.create_subscription(String, '/status', callback, qos_profile_system_default)</code></pre>

                <h2 id="topics">í† í”½ (Topics) ì‹¬í™”</h2>
                <p>í† í”½ì€ ë¹„ë™ê¸° í¼ë¸”ë¦¬ì‹œ-ì„œë¸ŒìŠ¤í¬ë¼ì´ë¸Œ íŒ¨í„´ì…ë‹ˆë‹¤. 1:N, N:1, N:N í†µì‹ ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>

                <div class="diagram">
Publisher â”€â”€â”€â”€â”€â”€â–¶ Topic â”€â”€â”€â”€â”€â”€â–¶ Subscriber
   â”‚               â”‚               â”‚
   â”‚               â”‚               â–¼
   â”‚               â”‚          Subscriber
   â”‚               â”‚               â”‚
   â–¼               â”‚               â–¼
Publisher â”€â”€â”€â”€â”€â”€â”€â”€â”˜          Subscriber

      Many-to-Many Communication
                </div>

<pre><code># í† í”½ ëª©ë¡
ros2 topic list

# í† í”½ ì •ë³´ (íƒ€ì…, QoS, ë°œí–‰ì/êµ¬ë…ì ìˆ˜)
ros2 topic info /cmd_vel -v

# í† í”½ ëª¨ë‹ˆí„°ë§
ros2 topic echo /scan

# í† í”½ ë°œí–‰ë¥ 
ros2 topic hz /scan

# í† í”½ ì§€ì—°ì‹œê°„
ros2 topic delay /scan

# ëŒ€ì—­í­ ì¸¡ì •
ros2 topic bw /image_raw</code></pre>

                <h2 id="services">ì„œë¹„ìŠ¤ (Services) ì‹¬í™”</h2>
                <p>ì„œë¹„ìŠ¤ëŠ” ë™ê¸° ìš”ì²­-ì‘ë‹µ íŒ¨í„´ì…ë‹ˆë‹¤. 1:1 í†µì‹ ìœ¼ë¡œ ê²°ê³¼ë¥¼ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.</p>

                <div class="diagram">
Client â”€â”€â”€â”€ Request â”€â”€â”€â”€â–¶ Server
   â”‚                        â”‚
   â”‚                   Processing
   â”‚                        â”‚
   â””â—€â”€â”€â”€â”€ Response â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Synchronous Request-Response
                </div>

                <h3>ì„œë¹„ìŠ¤ ì •ì˜ (.srv)</h3>
<pre><code># srv/SetSpeed.srv
float32 linear_speed
float32 angular_speed
---
bool success
string message</code></pre>

                <h3>ì„œë¹„ìŠ¤ ì„œë²„ êµ¬í˜„</h3>
<pre><code>from jetbot_interfaces.srv import SetSpeed

class SpeedServiceNode(Node):
    def __init__(self):
        super().__init__('speed_service')
        self.srv = self.create_service(
            SetSpeed,
            'set_speed',
            self.set_speed_callback
        )

    def set_speed_callback(self, request, response):
        self.get_logger().info(
            f'Setting speed: linear={request.linear_speed}, '
            f'angular={request.angular_speed}'
        )

        # ì†ë„ ì„¤ì • ë¡œì§
        try:
            self.apply_speed(request.linear_speed, request.angular_speed)
            response.success = True
            response.message = 'Speed set successfully'
        except Exception as e:
            response.success = False
            response.message = str(e)

        return response</code></pre>

                <h3>ì„œë¹„ìŠ¤ í´ë¼ì´ì–¸íŠ¸</h3>
<pre><code>class SpeedClientNode(Node):
    def __init__(self):
        super().__init__('speed_client')
        self.cli = self.create_client(SetSpeed, 'set_speed')

        # ì„œë¹„ìŠ¤ ëŒ€ê¸°
        while not self.cli.wait_for_service(timeout_sec=1.0):
            self.get_logger().info('Waiting for service...')

    def send_request(self, linear, angular):
        request = SetSpeed.Request()
        request.linear_speed = linear
        request.angular_speed = angular

        # ë¹„ë™ê¸° í˜¸ì¶œ
        future = self.cli.call_async(request)
        future.add_done_callback(self.response_callback)

    def response_callback(self, future):
        response = future.result()
        self.get_logger().info(f'Result: {response.success}, {response.message}')</code></pre>

                <h2 id="actions">ì•¡ì…˜ (Actions) ì‹¬í™”</h2>
                <p>
                    ì•¡ì…˜ì€ ì¥ì‹œê°„ ì‹¤í–‰ ì‘ì—…ì„ ìœ„í•œ íŒ¨í„´ì…ë‹ˆë‹¤.
                    í”¼ë“œë°±ê³¼ ì·¨ì†Œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.
                </p>

                <div class="diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ACTION                                 â”‚
â”‚                                                               â”‚
â”‚   Client â”€â”€â”€â”€ Goal â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Server                          â”‚
â”‚      â”‚                          â”‚                            â”‚
â”‚      â”‚â—€â”€â”€â”€â”€ Goal Response â”€â”€â”€â”€â”€â”€â”¤                            â”‚
â”‚      â”‚                          â”‚                            â”‚
â”‚      â”‚â—€â”€â”€â”€â”€ Feedback â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ (periodic)                 â”‚
â”‚      â”‚â—€â”€â”€â”€â”€ Feedback â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                            â”‚
â”‚      â”‚                          â”‚                            â”‚
â”‚      â”‚â”€â”€â”€â”€ Cancel Request â”€â”€â”€â”€â”€â”€â–¶ (optional)                 â”‚
â”‚      â”‚                          â”‚                            â”‚
â”‚      â”‚â—€â”€â”€â”€â”€ Result â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                               â”‚
â”‚   Long-running task with feedback and cancellation           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                </div>

                <h3>ì•¡ì…˜ ì •ì˜ (.action)</h3>
<pre><code># action/Navigate.action

# Goal
geometry_msgs/PoseStamped target_pose
---
# Result
bool success
float32 total_distance
float32 total_time
---
# Feedback
geometry_msgs/PoseStamped current_pose
float32 distance_remaining
float32 estimated_time_remaining</code></pre>

                <h3>ì•¡ì…˜ ì„œë²„</h3>
<pre><code>from rclpy.action import ActionServer, CancelResponse, GoalResponse
from jetbot_interfaces.action import Navigate

class NavigateActionServer(Node):
    def __init__(self):
        super().__init__('navigate_server')
        self._action_server = ActionServer(
            self,
            Navigate,
            'navigate',
            execute_callback=self.execute_callback,
            goal_callback=self.goal_callback,
            cancel_callback=self.cancel_callback
        )

    def goal_callback(self, goal_request):
        """Goal ìˆ˜ë½/ê±°ë¶€ ê²°ì •"""
        self.get_logger().info('Received goal request')
        return GoalResponse.ACCEPT

    def cancel_callback(self, goal_handle):
        """ì·¨ì†Œ ìš”ì²­ ì²˜ë¦¬"""
        self.get_logger().info('Received cancel request')
        return CancelResponse.ACCEPT

    async def execute_callback(self, goal_handle):
        """ì‹¤ì œ ì‘ì—… ìˆ˜í–‰"""
        self.get_logger().info('Executing goal...')

        feedback_msg = Navigate.Feedback()
        result = Navigate.Result()

        # ì£¼ê¸°ì ìœ¼ë¡œ í”¼ë“œë°± ì „ì†¡
        for i in range(100):
            if goal_handle.is_cancel_requested:
                goal_handle.canceled()
                result.success = False
                return result

            feedback_msg.distance_remaining = 100.0 - i
            goal_handle.publish_feedback(feedback_msg)
            await asyncio.sleep(0.1)

        goal_handle.succeed()
        result.success = True
        result.total_distance = 10.0
        return result</code></pre>

                <h2 id="parameters">íŒŒë¼ë¯¸í„° ì‹œìŠ¤í…œ</h2>
                <p>ë…¸ë“œì˜ ì„¤ì •ê°’ì„ ëŸ°íƒ€ì„ì— ë™ì ìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<pre><code>class ParameterNode(Node):
    def __init__(self):
        super().__init__('param_node')

        # íŒŒë¼ë¯¸í„° ì„ ì–¸
        self.declare_parameter('max_speed', 1.0)
        self.declare_parameter('wheelbase', 0.15)
        self.declare_parameter('control_frequency', 50)

        # íŒŒë¼ë¯¸í„° ì½œë°± ë“±ë¡
        self.add_on_set_parameters_callback(self.parameter_callback)

    def parameter_callback(self, params):
        """íŒŒë¼ë¯¸í„° ë³€ê²½ ì‹œ í˜¸ì¶œ"""
        for param in params:
            self.get_logger().info(f'Parameter {param.name} changed to {param.value}')

            if param.name == 'max_speed':
                if param.value < 0 or param.value > 2.0:
                    return SetParametersResult(
                        successful=False,
                        reason='max_speed must be between 0 and 2.0'
                    )

        return SetParametersResult(successful=True)</code></pre>

<pre><code># CLIì—ì„œ íŒŒë¼ë¯¸í„° ì¡°ì‘
ros2 param list /motor_driver
ros2 param get /motor_driver max_speed
ros2 param set /motor_driver max_speed 0.5

# YAML íŒŒì¼ë¡œ íŒŒë¼ë¯¸í„° ë¡œë“œ
ros2 run jetbot_ros2 motor_driver --ros-args \
    --params-file config/motor_params.yaml</code></pre>

                <h2 id="lifecycle">Lifecycle ë…¸ë“œ</h2>
                <p>
                    Lifecycle ë…¸ë“œëŠ” ìƒíƒœ ë¨¸ì‹ ì„ ì œê³µí•˜ì—¬ ë…¸ë“œì˜ ì‹œì‘/ì¢…ë£Œë¥¼
                    ì˜ˆì¸¡ ê°€ëŠ¥í•˜ê²Œ ê´€ë¦¬í•©ë‹ˆë‹¤. ì‚°ì—…ìš© ë¡œë´‡ì—ì„œ í•„ìˆ˜ì ì…ë‹ˆë‹¤.
                </p>

                <div class="diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LIFECYCLE STATE MACHINE                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    configure()    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚    â”‚ Unconfiguredâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Inactive   â”‚            â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚           â–²                                 â”‚                    â”‚
â”‚           â”‚ cleanup()                       â”‚ activate()         â”‚
â”‚           â”‚                                 â–¼                    â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”    deactivate()   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚    â”‚  Inactive   â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   Active    â”‚            â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                  â”‚
â”‚    Any State â”€â”€â”€â”€â”€â”€â”€ shutdown() â”€â”€â”€â”€â”€â–¶ Finalized                â”‚
â”‚                                                                  â”‚
â”‚    Any State â”€â”€â”€â”€â”€â”€â”€ error â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Error Handling           â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                </div>

<pre><code>from rclpy.lifecycle import Node as LifecycleNode
from rclpy.lifecycle import State, TransitionCallbackReturn

class MotorDriverLifecycle(LifecycleNode):
    def __init__(self):
        super().__init__('motor_driver_lifecycle')
        self.kit = None

    def on_configure(self, state: State) -> TransitionCallbackReturn:
        """í•˜ë“œì›¨ì–´ ì´ˆê¸°í™”"""
        self.get_logger().info('Configuring...')
        try:
            self.kit = ServoKit(channels=16)
            return TransitionCallbackReturn.SUCCESS
        except Exception as e:
            self.get_logger().error(f'Configuration failed: {e}')
            return TransitionCallbackReturn.FAILURE

    def on_activate(self, state: State) -> TransitionCallbackReturn:
        """êµ¬ë…ì/ë°œí–‰ì í™œì„±í™”"""
        self.get_logger().info('Activating...')
        self.subscription = self.create_subscription(
            Twist, 'cmd_vel', self.cmd_vel_callback, 10
        )
        return TransitionCallbackReturn.SUCCESS

    def on_deactivate(self, state: State) -> TransitionCallbackReturn:
        """ëª¨í„° ì •ì§€, êµ¬ë… í•´ì œ"""
        self.get_logger().info('Deactivating...')
        self.stop_motors()
        self.destroy_subscription(self.subscription)
        return TransitionCallbackReturn.SUCCESS

    def on_cleanup(self, state: State) -> TransitionCallbackReturn:
        """ë¦¬ì†ŒìŠ¤ í•´ì œ"""
        self.get_logger().info('Cleaning up...')
        self.kit = None
        return TransitionCallbackReturn.SUCCESS

    def on_shutdown(self, state: State) -> TransitionCallbackReturn:
        """ìµœì¢… ì¢…ë£Œ"""
        self.get_logger().info('Shutting down...')
        return TransitionCallbackReturn.SUCCESS</code></pre>

<pre><code># Lifecycle ë…¸ë“œ ì œì–´
ros2 lifecycle list /motor_driver_lifecycle
ros2 lifecycle set /motor_driver_lifecycle configure
ros2 lifecycle set /motor_driver_lifecycle activate
ros2 lifecycle set /motor_driver_lifecycle deactivate
ros2 lifecycle set /motor_driver_lifecycle shutdown</code></pre>

                <h2 id="composition">ë…¸ë“œ ì»´í¬ì§€ì…˜</h2>
                <p>
                    ì—¬ëŸ¬ ë…¸ë“œë¥¼ ë‹¨ì¼ í”„ë¡œì„¸ìŠ¤ì—ì„œ ì‹¤í–‰í•˜ì—¬ ì˜¤ë²„í—¤ë“œë¥¼ ì¤„ì…ë‹ˆë‹¤.
                    Intra-process í†µì‹ ê³¼ ê²°í•©í•˜ë©´ Zero-Copyê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
                </p>

                <div class="diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 WITHOUT COMPOSITION                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚Process 1â”‚    â”‚Process 2â”‚    â”‚Process 3â”‚    â”‚Process 4â”‚   â”‚
â”‚   â”‚ Node A  â”‚â”€â”€â”€â–¶â”‚ Node B  â”‚â”€â”€â”€â–¶â”‚ Node C  â”‚â”€â”€â”€â–¶â”‚ Node D  â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                  (IPC Overhead)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  WITH COMPOSITION                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                    Single Process                        â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚   â”‚   â”‚ Node A â”‚â”€â”€â–¶â”‚ Node B â”‚â”€â”€â–¶â”‚ Node C â”‚â”€â”€â–¶â”‚ Node D â”‚    â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚   â”‚              (Intra-process, Zero-Copy)                  â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                </div>

<pre><code># component_containerë¡œ ë…¸ë“œ ë¡œë“œ
ros2 run rclcpp_components component_container

# ë‹¤ë¥¸ í„°ë¯¸ë„ì—ì„œ ì»´í¬ë„ŒíŠ¸ ë¡œë“œ
ros2 component load /ComponentManager \
    composition composition::Talker
ros2 component load /ComponentManager \
    composition composition::Listener

# ì»´í¬ë„ŒíŠ¸ ëª©ë¡ í™•ì¸
ros2 component list</code></pre>

                <h2 id="executors">Executors ì´í•´</h2>
                <p>
                    ExecutorëŠ” ì½œë°±ì„ ì‹¤í–‰í•˜ëŠ” ìŠ¤ì¼€ì¤„ëŸ¬ì…ë‹ˆë‹¤.
                    ì‹±ê¸€ ìŠ¤ë ˆë“œì™€ ë©€í‹° ìŠ¤ë ˆë“œ ì˜µì…˜ì´ ìˆìŠµë‹ˆë‹¤.
                </p>

<pre><code>import rclpy
from rclpy.executors import SingleThreadedExecutor, MultiThreadedExecutor

def main():
    rclpy.init()

    node1 = MotorDriverNode()
    node2 = SensorNode()

    # ì‹±ê¸€ ìŠ¤ë ˆë“œ (ê¸°ë³¸)
    executor = SingleThreadedExecutor()
    executor.add_node(node1)
    executor.add_node(node2)

    # ë©€í‹° ìŠ¤ë ˆë“œ (ë³‘ë ¬ ì½œë°±)
    # executor = MultiThreadedExecutor(num_threads=4)

    try:
        executor.spin()
    finally:
        executor.shutdown()
        rclpy.shutdown()</code></pre>

                <h2 id="callbacks">ì½œë°± ê·¸ë£¹</h2>
                <p>ì½œë°±ì˜ ë™ì‹œ ì‹¤í–‰ ì—¬ë¶€ë¥¼ ì œì–´í•©ë‹ˆë‹¤.</p>

<pre><code>from rclpy.callback_groups import MutuallyExclusiveCallbackGroup, ReentrantCallbackGroup

class CallbackGroupNode(Node):
    def __init__(self):
        super().__init__('callback_group_node')

        # ìƒí˜¸ ë°°íƒ€ì  (ë™ì‹œ ì‹¤í–‰ ë¶ˆê°€)
        self.exclusive_group = MutuallyExclusiveCallbackGroup()

        # ì¬ì§„ì… ê°€ëŠ¥ (ë™ì‹œ ì‹¤í–‰ í—ˆìš©)
        self.reentrant_group = ReentrantCallbackGroup()

        # ì„¼ì„œ ì½œë°± - ë™ì‹œ ì‹¤í–‰ í—ˆìš©
        self.sub1 = self.create_subscription(
            LaserScan, '/scan', self.scan_callback,
            10, callback_group=self.reentrant_group
        )

        # ì œì–´ ì½œë°± - ë™ì‹œ ì‹¤í–‰ ë¶ˆê°€
        self.sub2 = self.create_subscription(
            Twist, '/cmd_vel', self.cmd_callback,
            10, callback_group=self.exclusive_group
        )

        # íƒ€ì´ë¨¸ - ì œì–´ì™€ ìƒí˜¸ ë°°íƒ€
        self.timer = self.create_timer(
            0.1, self.timer_callback,
            callback_group=self.exclusive_group
        )</code></pre>

                <h2 id="realtime">ì‹¤ì‹œê°„ ROS 2</h2>
                <p>
                    ì‹¤ì‹œê°„ ì‹œìŠ¤í…œì—ì„œëŠ” ê²°ì •ë¡ ì  íƒ€ì´ë°ì´ í•„ìš”í•©ë‹ˆë‹¤.
                    ROS 2ëŠ” ì‹¤ì‹œê°„ ì§€ì›ì„ ìœ„í•œ ì—¬ëŸ¬ ê¸°ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.
                </p>

                <h3>ì‹¤ì‹œê°„ ìš”êµ¬ì‚¬í•­</h3>
                <ul>
                    <li>ë™ì  ë©”ëª¨ë¦¬ í• ë‹¹ íšŒí”¼</li>
                    <li>ë½-í”„ë¦¬ í†µì‹ </li>
                    <li>ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ìŠ¤ì¼€ì¤„ë§</li>
                    <li>RT-PREEMPT ì»¤ë„</li>
                </ul>

<pre><code># PREEMPT_RT ì»¤ë„ í™•ì¸
uname -a  # PREEMPT_RT í¬í•¨ í™•ì¸

# ì‹¤ì‹œê°„ ìš°ì„ ìˆœìœ„ ì„¤ì •
sudo chrt -f 99 ros2 run jetbot_ros2 motor_driver

# CPU affinity ì„¤ì •
taskset -c 0 ros2 run jetbot_ros2 motor_driver</code></pre>

                <h3>ì‹¤ì‹œê°„ ë…¸ë“œ ì„¤ì •</h3>
<pre><code>from rclpy.executors import SingleThreadedExecutor
from rclpy.qos import QoSProfile, QoSReliabilityPolicy

def main():
    rclpy.init()

    node = MotorDriverNode()
    executor = SingleThreadedExecutor()
    executor.add_node(node)

    # ë©”ëª¨ë¦¬ í”„ë¦¬ë¡œë“œ
    node.pre_allocate_memory()

    # ìš°ì„ ìˆœìœ„ ì„¤ì • (Linux)
    import os
    os.sched_setscheduler(0, os.SCHED_FIFO, os.sched_param(99))

    executor.spin()</code></pre>

                <h2 id="intra-process">Intra-Process í†µì‹ </h2>
                <p>
                    ê°™ì€ í”„ë¡œì„¸ìŠ¤ ë‚´ ë…¸ë“œ ê°„ Zero-Copy í†µì‹ ìœ¼ë¡œ
                    ì§€ì—°ì‹œê°„ì„ ìµœì†Œí™”í•©ë‹ˆë‹¤.
                </p>

<pre><code>from rclpy.node import Node

class ImagePublisher(Node):
    def __init__(self):
        super().__init__('image_publisher')

        # Intra-process í™œì„±í™”
        self.publisher = self.create_publisher(
            Image,
            'image',
            10,
            # callback_groupì€ ì»´í¬ì§€ì…˜ê³¼ í•¨ê»˜ ì‚¬ìš©
        )

    def publish_image(self, img_data):
        msg = Image()
        msg.data = img_data

        # loan_messageë¡œ Zero-Copy
        loaned_msg = self.publisher.borrow_loaned_message()
        loaned_msg.data = img_data
        self.publisher.publish(loaned_msg)</code></pre>

                <h2 id="colcon">Colcon ë¹Œë“œ ì‹œìŠ¤í…œ</h2>

<pre><code># ì „ì²´ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ë¹Œë“œ
colcon build

# íŠ¹ì • íŒ¨í‚¤ì§€ë§Œ ë¹Œë“œ
colcon build --packages-select jetbot_ros2

# ì˜ì¡´ì„± í¬í•¨ ë¹Œë“œ
colcon build --packages-up-to jetbot_ros2

# ë¹Œë“œ ì˜µì…˜
colcon build \
    --symlink-install \           # ì‹¬ë³¼ë¦­ ë§í¬ (Python ìˆ˜ì • ì¦‰ì‹œ ë°˜ì˜)
    --cmake-args -DCMAKE_BUILD_TYPE=Release \
    --parallel-workers 4

# í…ŒìŠ¤íŠ¸ ì‹¤í–‰
colcon test --packages-select jetbot_ros2
colcon test-result --verbose</code></pre>

                <h2 id="launch">Launch ì‹œìŠ¤í…œ ì‹¬í™”</h2>

<pre><code># launch/jetbot_full.launch.py
from launch import LaunchDescription
from launch.actions import DeclareLaunchArgument, IncludeLaunchDescription
from launch.conditions import IfCondition
from launch.substitutions import LaunchConfiguration, PathJoinSubstitution
from launch_ros.actions import Node
from launch_ros.substitutions import FindPackageShare

def generate_launch_description():
    # ëŸ°ì¹˜ ì¸ì ì„ ì–¸
    use_sim = DeclareLaunchArgument(
        'use_sim',
        default_value='false',
        description='Use simulation'
    )

    robot_name = DeclareLaunchArgument(
        'robot_name',
        default_value='jetbot',
        description='Robot namespace'
    )

    # ì„¤ì • íŒŒì¼ ê²½ë¡œ
    config_file = PathJoinSubstitution([
        FindPackageShare('jetbot_ros2'),
        'config',
        'params.yaml'
    ])

    # ë…¸ë“œ ì •ì˜
    motor_driver = Node(
        package='jetbot_ros2',
        executable='motor_driver',
        name='motor_driver',
        namespace=LaunchConfiguration('robot_name'),
        parameters=[config_file],
        remappings=[
            ('cmd_vel', 'cmd_vel_nav')
        ],
        condition=IfCondition(
            LaunchConfiguration('use_sim').perform(context) == 'false'
        )
    )

    # ë‹¤ë¥¸ ëŸ°ì¹˜ íŒŒì¼ í¬í•¨
    slam_launch = IncludeLaunchDescription(
        PathJoinSubstitution([
            FindPackageShare('slam_toolbox'),
            'launch',
            'online_async_launch.py'
        ]),
        launch_arguments={
            'use_sim_time': LaunchConfiguration('use_sim')
        }.items()
    )

    return LaunchDescription([
        use_sim,
        robot_name,
        motor_driver,
        slam_launch
    ])</code></pre>

                <h2 id="debugging">ë””ë²„ê¹… ê¸°ë²•</h2>

<pre><code># ë…¸ë“œ ê·¸ë˜í”„ ì‹œê°í™”
ros2 run rqt_graph rqt_graph

# TF íŠ¸ë¦¬ ì‹œê°í™”
ros2 run rqt_tf_tree rqt_tf_tree

# í† í”½ ëª¨ë‹ˆí„°ë§
ros2 run rqt_topic rqt_topic

# ë…¸ë“œ ì •ë³´
ros2 node info /motor_driver

# ë¡œê·¸ ë ˆë²¨ ë³€ê²½
ros2 service call /motor_driver/set_logger_level \
    rcl_interfaces/srv/SetLoggerLevel \
    "{logger_name: 'motor_driver', level: 10}"  # DEBUG=10

# bag ë…¹í™”/ì¬ìƒ
ros2 bag record -a -o my_bag
ros2 bag play my_bag

# ì„±ëŠ¥ í”„ë¡œíŒŒì¼ë§
ros2 run tracetools_analysis ros2_tracing</code></pre>

                <!-- ==================== ì‹œê°í™” ë„êµ¬ ==================== -->
                <h1 id="rviz" style="margin-top: 4rem; padding-top: 2rem; border-top: 2px solid var(--primary-color);">RViz 2 ì‹œê°í™”</h1>
                <p>
                    RViz 2ëŠ” ROS 2ì˜ í•µì‹¬ ì‹œê°í™” ë„êµ¬ì…ë‹ˆë‹¤. ì„¼ì„œ ë°ì´í„°, ë¡œë´‡ ëª¨ë¸,
                    TF íŠ¸ë¦¬, ì§€ë„, ê²½ë¡œ ë“±ì„ 3Dë¡œ ì‹œê°í™”í•©ë‹ˆë‹¤.
                </p>

                <h3>RViz 2 ì„¤ì¹˜ ë° ì‹¤í–‰</h3>
<pre><code># ì„¤ì¹˜
sudo apt install ros-humble-rviz2

# ê¸°ë³¸ ì‹¤í–‰
rviz2

# ì„¤ì • íŒŒì¼ê³¼ í•¨ê»˜ ì‹¤í–‰
rviz2 -d ~/jetbot_ws/config/jetbot.rviz</code></pre>

                <h3>ì£¼ìš” Display íƒ€ì…</h3>
                <table class="specs-table">
                    <thead>
                        <tr>
                            <th>Display</th>
                            <th>í† í”½ íƒ€ì…</th>
                            <th>ìš©ë„</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>RobotModel</strong></td>
                            <td>/robot_description</td>
                            <td>URDF ë¡œë´‡ ëª¨ë¸ ì‹œê°í™”</td>
                        </tr>
                        <tr>
                            <td><strong>TF</strong></td>
                            <td>/tf, /tf_static</td>
                            <td>ì¢Œí‘œê³„ ë³€í™˜ ì‹œê°í™”</td>
                        </tr>
                        <tr>
                            <td><strong>LaserScan</strong></td>
                            <td>sensor_msgs/LaserScan</td>
                            <td>2D LiDAR ë°ì´í„°</td>
                        </tr>
                        <tr>
                            <td><strong>PointCloud2</strong></td>
                            <td>sensor_msgs/PointCloud2</td>
                            <td>3D í¬ì¸íŠ¸ í´ë¼ìš°ë“œ</td>
                        </tr>
                        <tr>
                            <td><strong>Image</strong></td>
                            <td>sensor_msgs/Image</td>
                            <td>ì¹´ë©”ë¼ ì´ë¯¸ì§€</td>
                        </tr>
                        <tr>
                            <td><strong>Map</strong></td>
                            <td>nav_msgs/OccupancyGrid</td>
                            <td>2D ì ìœ  ê²©ì ì§€ë„</td>
                        </tr>
                        <tr>
                            <td><strong>Path</strong></td>
                            <td>nav_msgs/Path</td>
                            <td>ê²½ë¡œ ì‹œê°í™”</td>
                        </tr>
                        <tr>
                            <td><strong>Marker</strong></td>
                            <td>visualization_msgs/Marker</td>
                            <td>ì‚¬ìš©ì ì •ì˜ ë§ˆì»¤</td>
                        </tr>
                        <tr>
                            <td><strong>Odometry</strong></td>
                            <td>nav_msgs/Odometry</td>
                            <td>ë¡œë´‡ ìœ„ì¹˜/ì†ë„</td>
                        </tr>
                    </tbody>
                </table>

                <h3>RViz ì„¤ì • íŒŒì¼ ì˜ˆì‹œ</h3>
<pre><code># config/jetbot.rviz
Panels:
  - Class: rviz_common/Displays
  - Class: rviz_common/Views
Visualization Manager:
  Displays:
    - Class: rviz_default_plugins/RobotModel
      Name: RobotModel
      Description Topic: /robot_description
    - Class: rviz_default_plugins/TF
      Name: TF
      Show Names: true
      Show Axes: true
    - Class: rviz_default_plugins/LaserScan
      Name: LaserScan
      Topic: /scan
      Size (m): 0.03
      Color: 0; 255; 0
    - Class: rviz_default_plugins/Map
      Name: Map
      Topic: /map
      Color Scheme: map
    - Class: rviz_default_plugins/Path
      Name: Global Path
      Topic: /plan
      Color: 255; 0; 0
  Global Options:
    Fixed Frame: map
    Frame Rate: 30</code></pre>

                <h3>Interactive Marker ì‚¬ìš©</h3>
<pre><code># Nav2 Goal ì „ì†¡
ros2 run rviz2 rviz2

# RVizì—ì„œ:
# 1. "2D Goal Pose" ë²„íŠ¼ í´ë¦­
# 2. ë§µ ìœ„ì—ì„œ ëª©í‘œ ìœ„ì¹˜/ë°©í–¥ ì§€ì •
# 3. Nav2ê°€ ìë™ìœ¼ë¡œ ê²½ë¡œ ê³„íš ë° ì£¼í–‰</code></pre>

                <h2 id="rqt">RQt ë„êµ¬ ëª¨ìŒ</h2>
                <p>
                    RQtëŠ” Qt ê¸°ë°˜ì˜ í”ŒëŸ¬ê·¸ì¸ í”„ë ˆì„ì›Œí¬ë¡œ, ë‹¤ì–‘í•œ GUI ë„êµ¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
                </p>

                <div class="diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           RQt TOOLS                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  rqt_graph   â”‚  â”‚  rqt_topic   â”‚  â”‚     rqt_console          â”‚  â”‚
â”‚   â”‚  ë…¸ë“œ ê·¸ë˜í”„  â”‚  â”‚  í† í”½ ëª¨ë‹ˆí„°  â”‚  â”‚     ë¡œê·¸ ë·°ì–´            â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ rqt_tf_tree  â”‚  â”‚  rqt_plot    â”‚  â”‚   rqt_image_view         â”‚  â”‚
â”‚   â”‚  TF íŠ¸ë¦¬      â”‚  â”‚  ë°ì´í„° í”Œë¡¯  â”‚  â”‚   ì´ë¯¸ì§€ ë·°ì–´            â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚rqt_reconfigureâ”‚ â”‚ rqt_bag      â”‚  â”‚   rqt_publisher          â”‚  â”‚
â”‚   â”‚ íŒŒë¼ë¯¸í„° ì¡°ì •  â”‚  â”‚ Bag ì¬ìƒ     â”‚  â”‚   í† í”½ ë°œí–‰ GUI          â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                </div>

<pre><code># RQt ì„¤ì¹˜
sudo apt install ros-humble-rqt ros-humble-rqt-common-plugins

# ê°œë³„ ë„êµ¬ ì‹¤í–‰
rqt_graph              # ë…¸ë“œ/í† í”½ ì—°ê²° ê·¸ë˜í”„
rqt_topic              # í† í”½ ëª¨ë‹ˆí„°ë§
rqt_tf_tree            # TF íŠ¸ë¦¬ ì‹œê°í™”
rqt_plot               # ì‹¤ì‹œê°„ ë°ì´í„° í”Œë¡¯
rqt_image_view         # ì¹´ë©”ë¼ ì´ë¯¸ì§€ ë·°ì–´
rqt_console            # ë¡œê·¸ ë©”ì‹œì§€ ë·°ì–´
rqt_reconfigure        # ë™ì  íŒŒë¼ë¯¸í„° ì¡°ì •

# í†µí•© GUI
rqt</code></pre>

                <h3>rqt_plot ì‚¬ìš© ì˜ˆì‹œ</h3>
<pre><code># ì†ë„ ëª…ë ¹ ì‹œê°í™”
rqt_plot /cmd_vel/linear/x /cmd_vel/angular/z

# IMU ë°ì´í„° ì‹œê°í™”
rqt_plot /imu/linear_acceleration/x /imu/linear_acceleration/y /imu/linear_acceleration/z</code></pre>

                <h2 id="gazebo">Gazebo ì‹œë®¬ë ˆì´ì…˜</h2>
                <p>
                    GazeboëŠ” ë¬¼ë¦¬ ì—”ì§„ ê¸°ë°˜ì˜ 3D ë¡œë´‡ ì‹œë®¬ë ˆì´í„°ì…ë‹ˆë‹¤.
                    ROS 2 Humbleì—ì„œëŠ” Gazebo Fortress (Ignition)ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
                </p>

<pre><code># Gazebo ì„¤ì¹˜
sudo apt install ros-humble-gazebo-ros-pkgs

# ë˜ëŠ” ìƒˆë¡œìš´ Ignition Gazebo
sudo apt install ros-humble-ros-gz

# Gazebo ì‹¤í–‰
gazebo --verbose

# ROS 2 ì—°ë™ ì‹¤í–‰
ros2 launch gazebo_ros gazebo.launch.py</code></pre>

                <h3>JetBot Gazebo ëª¨ë¸</h3>
<pre><code>&lt;!-- urdf/jetbot_gazebo.urdf.xacro --&gt;
&lt;robot name="jetbot_gazebo" xmlns:xacro="http://www.ros.org/wiki/xacro"&gt;

  &lt;xacro:include filename="jetbot.urdf.xacro"/&gt;

  &lt;!-- Gazebo í”ŒëŸ¬ê·¸ì¸: ë””í¼ë Œì…œ ë“œë¼ì´ë¸Œ --&gt;
  &lt;gazebo&gt;
    &lt;plugin name="diff_drive" filename="libgazebo_ros_diff_drive.so"&gt;
      &lt;ros&gt;
        &lt;namespace&gt;/jetbot&lt;/namespace&gt;
      &lt;/ros&gt;

      &lt;left_joint&gt;left_wheel_joint&lt;/left_joint&gt;
      &lt;right_joint&gt;right_wheel_joint&lt;/right_joint&gt;

      &lt;wheel_separation&gt;0.15&lt;/wheel_separation&gt;
      &lt;wheel_diameter&gt;0.066&lt;/wheel_diameter&gt;

      &lt;max_wheel_torque&gt;20&lt;/max_wheel_torque&gt;
      &lt;max_wheel_acceleration&gt;1.0&lt;/max_wheel_acceleration&gt;

      &lt;command_topic&gt;cmd_vel&lt;/command_topic&gt;
      &lt;odometry_topic&gt;odom&lt;/odometry_topic&gt;
      &lt;odometry_frame&gt;odom&lt;/odometry_frame&gt;
      &lt;robot_base_frame&gt;base_link&lt;/robot_base_frame&gt;

      &lt;publish_odom&gt;true&lt;/publish_odom&gt;
      &lt;publish_odom_tf&gt;true&lt;/publish_odom_tf&gt;
      &lt;publish_wheel_tf&gt;false&lt;/publish_wheel_tf&gt;
    &lt;/plugin&gt;
  &lt;/gazebo&gt;

  &lt;!-- Gazebo í”ŒëŸ¬ê·¸ì¸: LiDAR --&gt;
  &lt;gazebo reference="laser_frame"&gt;
    &lt;sensor type="ray" name="lidar"&gt;
      &lt;pose&gt;0 0 0 0 0 0&lt;/pose&gt;
      &lt;visualize&gt;true&lt;/visualize&gt;
      &lt;update_rate&gt;10&lt;/update_rate&gt;
      &lt;ray&gt;
        &lt;scan&gt;
          &lt;horizontal&gt;
            &lt;samples&gt;360&lt;/samples&gt;
            &lt;resolution&gt;1&lt;/resolution&gt;
            &lt;min_angle&gt;-3.14159&lt;/min_angle&gt;
            &lt;max_angle&gt;3.14159&lt;/max_angle&gt;
          &lt;/horizontal&gt;
        &lt;/scan&gt;
        &lt;range&gt;
          &lt;min&gt;0.12&lt;/min&gt;
          &lt;max&gt;12.0&lt;/max&gt;
          &lt;resolution&gt;0.01&lt;/resolution&gt;
        &lt;/range&gt;
      &lt;/ray&gt;
      &lt;plugin name="scan" filename="libgazebo_ros_ray_sensor.so"&gt;
        &lt;ros&gt;
          &lt;remapping&gt;~/out:=scan&lt;/remapping&gt;
        &lt;/ros&gt;
        &lt;output_type&gt;sensor_msgs/LaserScan&lt;/output_type&gt;
        &lt;frame_name&gt;laser_frame&lt;/frame_name&gt;
      &lt;/plugin&gt;
    &lt;/sensor&gt;
  &lt;/gazebo&gt;

  &lt;!-- Gazebo í”ŒëŸ¬ê·¸ì¸: ì¹´ë©”ë¼ --&gt;
  &lt;gazebo reference="camera_link"&gt;
    &lt;sensor type="camera" name="camera"&gt;
      &lt;update_rate&gt;30.0&lt;/update_rate&gt;
      &lt;camera name="head"&gt;
        &lt;horizontal_fov&gt;1.3962634&lt;/horizontal_fov&gt;
        &lt;image&gt;
          &lt;width&gt;640&lt;/width&gt;
          &lt;height&gt;480&lt;/height&gt;
          &lt;format&gt;R8G8B8&lt;/format&gt;
        &lt;/image&gt;
      &lt;/camera&gt;
      &lt;plugin name="camera_controller" filename="libgazebo_ros_camera.so"&gt;
        &lt;frame_name&gt;camera_link&lt;/frame_name&gt;
      &lt;/plugin&gt;
    &lt;/sensor&gt;
  &lt;/gazebo&gt;

&lt;/robot&gt;</code></pre>

                <!-- ==================== SLAM & Navigation ==================== -->
                <h1 id="slam-theory" style="margin-top: 4rem; padding-top: 2rem; border-top: 2px solid var(--primary-color);">SLAM ì´ë¡ </h1>
                <p>
                    <strong>SLAM (Simultaneous Localization and Mapping)</strong>ì€
                    ë¡œë´‡ì´ ë¯¸ì§€ì˜ í™˜ê²½ì—ì„œ ì§€ë„ë¥¼ ìƒì„±í•˜ë©´ì„œ ë™ì‹œì— ìê¸° ìœ„ì¹˜ë¥¼ ì¶”ì •í•˜ëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤.
                </p>

                <div class="diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SLAM OVERVIEW                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚   Sensors   â”‚                     â”‚         Map             â”‚   â”‚
â”‚   â”‚  (LiDAR,    â”‚                     â”‚   â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”    â”‚   â”‚
â”‚   â”‚   Camera,   â”‚                     â”‚   â”‚   â”‚ â–ˆ â”‚   â”‚   â”‚    â”‚   â”‚
â”‚   â”‚   IMU)      â”‚                     â”‚   â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                     â”‚   â”‚   â”‚   â”‚   â”‚ â–ˆ â”‚    â”‚   â”‚
â”‚          â”‚                            â”‚   â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤    â”‚   â”‚
â”‚          â–¼                            â”‚   â”‚ â–ˆ â”‚   â”‚ R â”‚   â”‚    â”‚   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚   â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤    â”‚   â”‚
â”‚   â”‚    SLAM     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   â”‚   â”‚ â–ˆ â”‚   â”‚   â”‚    â”‚   â”‚
â”‚   â”‚  Algorithm  â”‚                     â”‚   â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                     â”‚   R = Robot, â–ˆ = Wall  â”‚   â”‚
â”‚          â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚          â–¼                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚   â”‚  Localizationâ”‚                                                  â”‚
â”‚   â”‚  (x, y, Î¸)   â”‚                                                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚                                                                      â”‚
â”‚   SLAM = P(Map, Pose | Observations, Controls)                      â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                </div>

                <h3>SLAM ì•Œê³ ë¦¬ì¦˜ ì¢…ë¥˜</h3>
                <table class="specs-table">
                    <thead>
                        <tr>
                            <th>ì•Œê³ ë¦¬ì¦˜</th>
                            <th>ë°©ì‹</th>
                            <th>íŠ¹ì§•</th>
                            <th>ì í•© í™˜ê²½</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>EKF-SLAM</strong></td>
                            <td>í•„í„° ê¸°ë°˜</td>
                            <td>ì„ í˜• ê·¼ì‚¬, ì†Œê·œëª¨</td>
                            <td>ì‘ì€ ì‹¤ë‚´</td>
                        </tr>
                        <tr>
                            <td><strong>Particle Filter</strong></td>
                            <td>í•„í„° ê¸°ë°˜</td>
                            <td>ë¹„ì„ í˜• ì²˜ë¦¬ ê°€ëŠ¥</td>
                            <td>ì‹¤ë‚´</td>
                        </tr>
                        <tr>
                            <td><strong>Graph-SLAM</strong></td>
                            <td>ê·¸ë˜í”„ ìµœì í™”</td>
                            <td>ëŒ€ê·œëª¨, ë£¨í”„ í´ë¡œì§•</td>
                            <td>ëŒ€í˜• ê±´ë¬¼</td>
                        </tr>
                        <tr>
                            <td><strong>SLAM Toolbox</strong></td>
                            <td>ê·¸ë˜í”„ ìµœì í™”</td>
                            <td>ROS 2 ê¸°ë³¸, 2D</td>
                            <td>ì‹¤ë‚´ ë¡œë´‡</td>
                        </tr>
                        <tr>
                            <td><strong>Cartographer</strong></td>
                            <td>ê·¸ë˜í”„ ìµœì í™”</td>
                            <td>Google, 2D/3D</td>
                            <td>ëŒ€ê·œëª¨</td>
                        </tr>
                        <tr>
                            <td><strong>ORB-SLAM</strong></td>
                            <td>íŠ¹ì§•ì  ê¸°ë°˜</td>
                            <td>Visual SLAM</td>
                            <td>ì¹´ë©”ë¼ ê¸°ë°˜</td>
                        </tr>
                        <tr>
                            <td><strong>RTAB-Map</strong></td>
                            <td>RGB-D SLAM</td>
                            <td>3D, ë©€í‹°ì„¼ì„œ</td>
                            <td>3D ë§¤í•‘</td>
                        </tr>
                    </tbody>
                </table>

                <h2 id="slam-toolbox">SLAM Toolbox ì‹¤ì „</h2>
                <p>
                    SLAM ToolboxëŠ” ROS 2ì˜ ê¸°ë³¸ 2D SLAM ì†”ë£¨ì…˜ì…ë‹ˆë‹¤.
                    ì˜¨ë¼ì¸/ì˜¤í”„ë¼ì¸ ë§¤í•‘, ìœ„ì¹˜ ì¶”ì •, ë§µ ìˆ˜ì •ì„ ì§€ì›í•©ë‹ˆë‹¤.
                </p>

<pre><code># ì„¤ì¹˜
sudo apt install ros-humble-slam-toolbox

# ì˜¨ë¼ì¸ ë¹„ë™ê¸° SLAM (ì‹¤ì‹œê°„ ë§¤í•‘)
ros2 launch slam_toolbox online_async_launch.py

# ì˜¨ë¼ì¸ ë™ê¸° SLAM (ì •í™•ë„ ìš°ì„ )
ros2 launch slam_toolbox online_sync_launch.py

# ì˜¤í”„ë¼ì¸ SLAM (bag ë°ì´í„°ë¡œ ë§¤í•‘)
ros2 launch slam_toolbox offline_launch.py</code></pre>

                <h3>SLAM Toolbox ì„¤ì •</h3>
<pre><code># config/slam_toolbox_params.yaml
slam_toolbox:
  ros__parameters:
    # ê¸°ë³¸ í”„ë ˆì„
    odom_frame: odom
    map_frame: map
    base_frame: base_link
    scan_topic: /scan
    use_scan_matching: true
    use_scan_barycenter: true

    # ë§¤í•‘ ëª¨ë“œ
    mode: mapping  # mapping, localization, lifelong

    # ìŠ¤ìº” ë§¤ì¹­ íŒŒë¼ë¯¸í„°
    resolution: 0.05           # ë§µ í•´ìƒë„ (m/cell)
    max_laser_range: 12.0      # ìµœëŒ€ ë ˆì´ì € ê±°ë¦¬
    minimum_travel_distance: 0.5   # í‚¤í”„ë ˆì„ ê±°ë¦¬
    minimum_travel_heading: 0.5    # í‚¤í”„ë ˆì„ íšŒì „ (rad)

    # ë£¨í”„ í´ë¡œì§•
    do_loop_closing: true
    loop_search_maximum_distance: 3.0
    loop_match_minimum_chain_size: 10

    # ìµœì í™”
    ceres_linear_solver: SPARSE_NORMAL_CHOLESKY
    ceres_preconditioner: SCHUR_JACOBI
    ceres_trust_strategy: LEVENBERG_MARQUARDT

    # ìŠ¤ìº” í•„í„°
    minimum_angle: -3.14159
    maximum_angle: 3.14159
    minimum_range: 0.1
    maximum_range: 12.0

    # ì„±ëŠ¥
    transform_publish_period: 0.02
    map_update_interval: 5.0</code></pre>

                <h3>ë§µ ì €ì¥ ë° ë¡œë“œ</h3>
<pre><code># ë§µ ì €ì¥
ros2 run nav2_map_server map_saver_cli -f ~/maps/my_room

# ìƒì„±ë˜ëŠ” íŒŒì¼:
# - my_room.pgm  (ì´ë¯¸ì§€)
# - my_room.yaml (ë©”íƒ€ë°ì´í„°)

# ë§µ ë¡œë“œ (ìœ„ì¹˜ ì¶”ì • ëª¨ë“œ)
ros2 launch slam_toolbox localization_launch.py \
    map_file_name:=/home/user/maps/my_room

# Map Serverë¡œ ë¡œë“œ
ros2 run nav2_map_server map_server \
    --ros-args -p yaml_filename:=~/maps/my_room.yaml</code></pre>

                <h2 id="cartographer">Google Cartographer</h2>
                <p>
                    CartographerëŠ” Googleì—ì„œ ê°œë°œí•œ SLAM ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ,
                    ëŒ€ê·œëª¨ í™˜ê²½ì—ì„œ ì •í™•í•œ 2D/3D ë§¤í•‘ì„ ì œê³µí•©ë‹ˆë‹¤.
                </p>

<pre><code># ì„¤ì¹˜
sudo apt install ros-humble-cartographer ros-humble-cartographer-ros

# ì‹¤í–‰
ros2 launch cartographer_ros cartographer.launch.py \
    use_sim_time:=false</code></pre>

                <h3>Cartographer ì„¤ì •</h3>
<pre><code>-- config/jetbot_2d.lua
include "map_builder.lua"
include "trajectory_builder.lua"

options = {
  map_builder = MAP_BUILDER,
  trajectory_builder = TRAJECTORY_BUILDER,
  map_frame = "map",
  tracking_frame = "base_link",
  published_frame = "odom",
  odom_frame = "odom",
  provide_odom_frame = false,
  publish_frame_projected_to_2d = true,
  use_odometry = true,
  use_nav_sat = false,
  use_landmarks = false,
  num_laser_scans = 1,
  num_multi_echo_laser_scans = 0,
  num_subdivisions_per_laser_scan = 1,
  num_point_clouds = 0,
  lookup_transform_timeout_sec = 0.2,
  submap_publish_period_sec = 0.3,
  pose_publish_period_sec = 5e-3,
  trajectory_publish_period_sec = 30e-3,
}

MAP_BUILDER.use_trajectory_builder_2d = true
MAP_BUILDER.num_background_threads = 4

TRAJECTORY_BUILDER_2D.min_range = 0.1
TRAJECTORY_BUILDER_2D.max_range = 12.0
TRAJECTORY_BUILDER_2D.missing_data_ray_length = 5.0
TRAJECTORY_BUILDER_2D.use_imu_data = false
TRAJECTORY_BUILDER_2D.use_online_correlative_scan_matching = true

return options</code></pre>

                <h2 id="nav2-deep">Nav2 ììœ¨ì£¼í–‰ ì‹¬í™”</h2>
                <p>
                    Nav2 (Navigation 2)ëŠ” ROS 2ì˜ ììœ¨ì£¼í–‰ ìŠ¤íƒì…ë‹ˆë‹¤.
                    ê²½ë¡œ ê³„íš, ì¥ì• ë¬¼ íšŒí”¼, í–‰ë™ íŠ¸ë¦¬ ê¸°ë°˜ ë‚´ë¹„ê²Œì´ì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.
                </p>

                <div class="diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         NAV2 ARCHITECTURE                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚                    BT Navigator (Behavior Tree)                 â”‚    â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚   â”‚   â”‚NavigateToâ”‚  â”‚FollowPathâ”‚  â”‚  Spin    â”‚  â”‚  Wait/Backup â”‚  â”‚    â”‚
â”‚   â”‚   â”‚  Pose    â”‚  â”‚          â”‚  â”‚          â”‚  â”‚              â”‚  â”‚    â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚            â”‚             â”‚             â”‚                â”‚               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚                         Planner Server                          â”‚    â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚   â”‚   â”‚   NavFn      â”‚  â”‚    Smac      â”‚  â”‚  Theta Star        â”‚  â”‚    â”‚
â”‚   â”‚   â”‚  (Dijkstra/  â”‚  â”‚   (State     â”‚  â”‚  (Any-angle)       â”‚  â”‚    â”‚
â”‚   â”‚   â”‚   A*)        â”‚  â”‚   Lattice)   â”‚  â”‚                    â”‚  â”‚    â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                â”‚                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚                       Controller Server                          â”‚    â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚   â”‚   â”‚     DWB      â”‚  â”‚   Regulated  â”‚  â”‚   MPPI Controller  â”‚   â”‚    â”‚
â”‚   â”‚   â”‚  (Dynamic    â”‚  â”‚ Pure Pursuit â”‚  â”‚   (Model Predictiveâ”‚   â”‚    â”‚
â”‚   â”‚   â”‚   Window)    â”‚  â”‚              â”‚  â”‚    Path Integral)  â”‚   â”‚    â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                â”‚                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚                        Costmap 2D                                â”‚    â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚   â”‚   â”‚  Static    â”‚  â”‚  Obstacle  â”‚  â”‚  Inflation â”‚  â”‚  Voxel   â”‚ â”‚    â”‚
â”‚   â”‚   â”‚   Layer    â”‚  â”‚   Layer    â”‚  â”‚   Layer    â”‚  â”‚  Layer   â”‚ â”‚    â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                </div>

<pre><code># Nav2 ì„¤ì¹˜
sudo apt install ros-humble-navigation2 ros-humble-nav2-bringup

# Nav2 ì „ì²´ ìŠ¤íƒ ì‹¤í–‰
ros2 launch nav2_bringup navigation_launch.py \
    use_sim_time:=false \
    params_file:=config/nav2_params.yaml

# ë§µê³¼ í•¨ê»˜ ì‹¤í–‰
ros2 launch nav2_bringup bringup_launch.py \
    map:=maps/my_map.yaml \
    params_file:=config/nav2_params.yaml</code></pre>

                <h2 id="costmap">Costmap ì„¤ì •</h2>
                <p>
                    Costmapì€ ë¡œë´‡ ì£¼ë³€ì˜ ì¥ì• ë¬¼ ì •ë³´ë¥¼ ë‚˜íƒ€ë‚´ëŠ” 2D ê·¸ë¦¬ë“œì…ë‹ˆë‹¤.
                    Global Costmap (ê²½ë¡œ ê³„íš)ê³¼ Local Costmap (ì¥ì• ë¬¼ íšŒí”¼)ì´ ìˆìŠµë‹ˆë‹¤.
                </p>

<pre><code># config/nav2_params.yaml (Costmap ë¶€ë¶„)
global_costmap:
  global_costmap:
    ros__parameters:
      update_frequency: 1.0
      publish_frequency: 1.0
      global_frame: map
      robot_base_frame: base_link
      robot_radius: 0.09
      resolution: 0.05
      track_unknown_space: true
      plugins: ["static_layer", "obstacle_layer", "inflation_layer"]

      static_layer:
        plugin: "nav2_costmap_2d::StaticLayer"
        map_subscribe_transient_local: true

      obstacle_layer:
        plugin: "nav2_costmap_2d::ObstacleLayer"
        enabled: true
        observation_sources: scan
        scan:
          topic: /scan
          max_obstacle_height: 2.0
          clearing: true
          marking: true
          data_type: "LaserScan"
          raytrace_max_range: 12.0
          raytrace_min_range: 0.0
          obstacle_max_range: 10.0
          obstacle_min_range: 0.0

      inflation_layer:
        plugin: "nav2_costmap_2d::InflationLayer"
        cost_scaling_factor: 3.0
        inflation_radius: 0.3

local_costmap:
  local_costmap:
    ros__parameters:
      update_frequency: 5.0
      publish_frequency: 2.0
      global_frame: odom
      robot_base_frame: base_link
      rolling_window: true
      width: 3
      height: 3
      resolution: 0.05
      robot_radius: 0.09
      plugins: ["voxel_layer", "inflation_layer"]

      voxel_layer:
        plugin: "nav2_costmap_2d::VoxelLayer"
        enabled: true
        publish_voxel_map: true
        origin_z: 0.0
        z_resolution: 0.05
        z_voxels: 16
        max_obstacle_height: 2.0
        mark_threshold: 0
        observation_sources: scan
        scan:
          topic: /scan
          max_obstacle_height: 2.0
          clearing: true
          marking: true
          data_type: "LaserScan"

      inflation_layer:
        plugin: "nav2_costmap_2d::InflationLayer"
        cost_scaling_factor: 3.0
        inflation_radius: 0.3</code></pre>

                <h2 id="path-planning">ê²½ë¡œ ê³„íš ì•Œê³ ë¦¬ì¦˜</h2>

                <h3>Global Planner ë¹„êµ</h3>
                <table class="specs-table">
                    <thead>
                        <tr>
                            <th>Planner</th>
                            <th>ì•Œê³ ë¦¬ì¦˜</th>
                            <th>íŠ¹ì§•</th>
                            <th>ì í•© í™˜ê²½</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>NavFn</strong></td>
                            <td>Dijkstra/A*</td>
                            <td>ë¹ ë¦„, ê¸°ë³¸</td>
                            <td>ì¼ë°˜</td>
                        </tr>
                        <tr>
                            <td><strong>Smac 2D</strong></td>
                            <td>A*</td>
                            <td>NavFn ëŒ€ì²´</td>
                            <td>ì¼ë°˜</td>
                        </tr>
                        <tr>
                            <td><strong>Smac Hybrid-A*</strong></td>
                            <td>Hybrid A*</td>
                            <td>ì°¨ëŸ‰ ë™ì—­í•™ ê³ ë ¤</td>
                            <td>ì°¨ëŸ‰í˜•</td>
                        </tr>
                        <tr>
                            <td><strong>Smac Lattice</strong></td>
                            <td>State Lattice</td>
                            <td>ê³ ì • í”„ë¦¬ë¯¸í‹°ë¸Œ</td>
                            <td>ë³µì¡ í™˜ê²½</td>
                        </tr>
                        <tr>
                            <td><strong>Theta*</strong></td>
                            <td>Any-angle</td>
                            <td>ì§ì„  ê²½ë¡œ</td>
                            <td>ë„“ì€ ê³µê°„</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Local Controller ë¹„êµ</h3>
                <table class="specs-table">
                    <thead>
                        <tr>
                            <th>Controller</th>
                            <th>íŠ¹ì§•</th>
                            <th>ì¥ì </th>
                            <th>ì í•© ë¡œë´‡</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>DWB</strong></td>
                            <td>Dynamic Window</td>
                            <td>ë™ì  ì¥ì• ë¬¼ íšŒí”¼</td>
                            <td>ì¼ë°˜ ì´ë™ ë¡œë´‡</td>
                        </tr>
                        <tr>
                            <td><strong>Regulated Pure Pursuit</strong></td>
                            <td>Pure Pursuit + ì†ë„ ì¡°ì ˆ</td>
                            <td>ë¶€ë“œëŸ¬ìš´ ê²½ë¡œ ì¶”ì¢…</td>
                            <td>JetBot (ê¶Œì¥)</td>
                        </tr>
                        <tr>
                            <td><strong>MPPI</strong></td>
                            <td>Model Predictive</td>
                            <td>ìµœì  ì œì–´, GPU ê°€ì†</td>
                            <td>ê³ ì„±ëŠ¥ ë¡œë´‡</td>
                        </tr>
                        <tr>
                            <td><strong>Rotation Shim</strong></td>
                            <td>ì œìë¦¬ íšŒì „</td>
                            <td>íšŒì „ í›„ ì§ì§„</td>
                            <td>ì¢ì€ ê³µê°„</td>
                        </tr>
                    </tbody>
                </table>

                <h3>JetBotìš© Nav2 ì„¤ì •</h3>
<pre><code># config/nav2_params.yaml (JetBot ìµœì í™”)
bt_navigator:
  ros__parameters:
    global_frame: map
    robot_base_frame: base_link
    odom_topic: /odom
    default_bt_xml_filename: "navigate_w_replanning_and_recovery.xml"
    plugin_lib_names:
      - nav2_compute_path_to_pose_action_bt_node
      - nav2_follow_path_action_bt_node
      - nav2_back_up_action_bt_node
      - nav2_spin_action_bt_node
      - nav2_wait_action_bt_node
      - nav2_clear_costmap_service_bt_node

planner_server:
  ros__parameters:
    planner_plugins: ["GridBased"]
    GridBased:
      plugin: "nav2_navfn_planner/NavfnPlanner"
      tolerance: 0.5
      use_astar: true
      allow_unknown: true

controller_server:
  ros__parameters:
    controller_frequency: 20.0
    min_x_velocity_threshold: 0.001
    min_y_velocity_threshold: 0.5
    min_theta_velocity_threshold: 0.001
    progress_checker_plugin: "progress_checker"
    goal_checker_plugins: ["goal_checker"]
    controller_plugins: ["FollowPath"]

    # Progress Checker
    progress_checker:
      plugin: "nav2_controller::SimpleProgressChecker"
      required_movement_radius: 0.5
      movement_time_allowance: 10.0

    # Goal Checker
    goal_checker:
      plugin: "nav2_controller::SimpleGoalChecker"
      xy_goal_tolerance: 0.1
      yaw_goal_tolerance: 0.1
      stateful: true

    # Regulated Pure Pursuit (JetBot ê¶Œì¥)
    FollowPath:
      plugin: "nav2_regulated_pure_pursuit_controller::RegulatedPurePursuitController"
      desired_linear_vel: 0.3
      lookahead_dist: 0.4
      min_lookahead_dist: 0.3
      max_lookahead_dist: 0.9
      lookahead_time: 1.5
      rotate_to_heading_angular_vel: 0.5
      transform_tolerance: 0.1
      use_velocity_scaled_lookahead_dist: false
      min_approach_linear_velocity: 0.05
      approach_velocity_scaling_dist: 0.6
      use_collision_detection: true
      max_allowed_time_to_collision_up_to_carrot: 1.0
      use_regulated_linear_velocity_scaling: true
      use_cost_regulated_linear_velocity_scaling: false
      regulated_linear_scaling_min_radius: 0.9
      regulated_linear_scaling_min_speed: 0.25
      allow_reversing: false
      max_angular_accel: 1.0
      max_robot_pose_search_dist: 10.0</code></pre>

                <h3>Nav2 ì‹¤í–‰ ë° ëª©í‘œ ì „ì†¡</h3>
<pre><code># í„°ë¯¸ë„ 1: Nav2 ìŠ¤íƒ ì‹¤í–‰
ros2 launch nav2_bringup bringup_launch.py \
    map:=~/maps/my_room.yaml \
    params_file:=~/jetbot_ws/config/nav2_params.yaml

# í„°ë¯¸ë„ 2: RVizë¡œ ì‹œê°í™” ë° ëª©í‘œ ì „ì†¡
rviz2 -d ~/jetbot_ws/config/nav2_default_view.rviz

# CLIë¡œ ëª©í‘œ ì „ì†¡
ros2 action send_goal /navigate_to_pose nav2_msgs/action/NavigateToPose \
    "{pose: {header: {frame_id: 'map'}, pose: {position: {x: 1.0, y: 2.0, z: 0.0}, orientation: {w: 1.0}}}}"

# ì›¨ì´í¬ì¸íŠ¸ ë”°ë¼ê°€ê¸°
ros2 action send_goal /follow_waypoints nav2_msgs/action/FollowWaypoints \
    "{poses: [{header: {frame_id: 'map'}, pose: {position: {x: 1.0, y: 0.0}}}, {header: {frame_id: 'map'}, pose: {position: {x: 2.0, y: 1.0}}}]}"</code></pre>

                <div class="alert alert-success">
                    <strong>í•™ìŠµ ì™„ë£Œ!</strong>
                    ROS 2ì˜ í•µì‹¬ ê°œë…ê³¼ SLAM, Navigationì„ ì´í•´í–ˆìŠµë‹ˆë‹¤.
                    ì‹¤ì œ ë¡œë´‡ì— ì ìš©í•˜ë©´ì„œ ë” ê¹Šì´ í•™ìŠµí•˜ì„¸ìš”.
                </div>

                <h3>ì¶”ê°€ í•™ìŠµ ìë£Œ</h3>
                <ul>
                    <li><a href="https://docs.ros.org/en/humble/" target="_blank">ROS 2 Humble Documentation</a></li>
                    <li><a href="https://navigation.ros.org/" target="_blank">Nav2 Documentation</a></li>
                    <li><a href="https://design.ros2.org/" target="_blank">ROS 2 Design Documentation</a></li>
                    <li><a href="https://github.com/ros2/examples" target="_blank">ROS 2 Examples Repository</a></li>
                </ul>

                <div style="margin-top: 3rem; padding-top: 2rem; border-top: 1px solid var(--border-color);">
                    <p style="text-align: center;">
                        <a href="ros2.html" class="btn btn-secondary">&larr; ì´ì „: ROS2 êµ¬í˜„</a>
                        <a href="web-tools.html" class="btn btn-primary" style="margin-left: 1rem;">ë‹¤ìŒ: Web Tools &rarr;</a>
                    </p>
                </div>
            </article>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-logo">
            <img src="https://raw.githubusercontent.com/hwkim3330/roii/refs/heads/main/keti.png" alt="KETI">
        </div>
        <p>
            JetBot ROS2 Documentation &copy; 2024 KETI |
            <a href="https://github.com/hwkim3330/jetbot-docs" target="_blank">GitHub</a>
        </p>
    </footer>
</body>
</html>
